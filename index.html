
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hedley</title>
  <meta name="author" content="hedley">

  
  <meta name="description" content="正文 由于我自己机器上的服务器配置，到公司联网后，需要手动设置 IP 10.0.xx.xx。一旦出了公司连入其他网络，又需要把 IP 改为自动获得。通常操作顺序是 系统偏好设置 -&gt; 网络 -&gt; Wi-Fi -&gt; 高级 -&gt; TCP/IP -&gt; 使用 DHCP，很麻烦 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hedleyyan.github.io/">
  <link href="/images/favicon_32.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Hedley" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--bigfoot-->
<script src="/javascripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/javascripts/bigfoot.js" type="text/javascript"></script>
<script type="text/javascript">
  $.bigfoot({ 
    actionOriginalFN: "delete",
    activateOnHover: "true",
    deleteOnUnhover: "true",
    hoverDelay: "500"
  });
</script>

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!--点击博客内链接，在新窗口中打开-->
<script type="text/javascript">
  function addBlankTargetForLinks () {
    $('a[href^="http"]').each(function(){
        $(this).attr('target', '_blank');
    });
  }

  $(document).bind('DOMNodeInserted', function(event) {
    addBlankTargetForLinks();
  });
</script>

<!--TOC-->
<script src="/javascripts/jquery.tableofcontents.min.js" type="text/javascript"></script>
<script type="text/javascript">
  // Revert jQuery's '$' alias, to avoid clashes with ender.js. NOTE: Use
  // jQuery(...), instead of $(...) from here on.
  jQuery.noConflict();
</script>
<script src="/javascripts/generate-toc.js" type="text/javascript"></script>

<!--Font awesome-->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div class="header">
    <h1 class="blog-title"><a href="/">Hedley</a></h1>
    
      <h2 class="blog-subtitle">Stay Hungry, Stay Foolish.</h2>
    
  </div>
</hgroup>
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">&nbsp;RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="hedleyyan.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/"><i class="fa fa-home"></i>&nbsp;首页</a></li>
  <li><a href="/blog/archives"><i class="fa fa-archive"></i>&nbsp;归档</a></li>
  <li><a href="/blog/gallery"><i class="fa fa-picture-o"></i>&nbsp;画廊</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/">OS X 通过命令行设置特定 IP</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-10-10T22:07:02+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:07 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>正文</h2>

<p>由于我自己机器上的服务器配置，到公司联网后，需要手动设置 IP <code>10.0.xx.xx</code>。一旦出了公司连入其他网络，又需要把 IP 改为自动获得。通常操作顺序是 <code>系统偏好设置 -&gt; 网络 -&gt; Wi-Fi -&gt; 高级 -&gt; TCP/IP -&gt; 使用 DHCP</code>，很麻烦。</p>

<p>查阅了一些资料，Mac OS X 其实可以通过命令行来执行：</p>

<ul>
<li><code>sudo networksetup -setmanualwithdhcprouter Wi-Fi 10.0.xx.xx</code> - 手动设置 IP</li>
<li><code>sudo networksetup -setdhcp Wi-Fi</code> - 自动获得 IP</li>
</ul>


<p>可以写入脚本，配合 <a href="https://www.alfredapp.com/">Alfred</a> 的 Workflows 功能更赞。</p>

<h2>引用</h2>

<p><a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man8/networksetup.8.html">OS X Man Pages</a></p>

<p><a href="http://serverfault.com/questions/638949/os-x-command-line-ipv4-interface-reset">OS X Command Line IPv4 interface Reset</a></p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/'><a href="http://hedleyyan.github.io/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/">http://hedleyyan.github.io/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/09/21/jvm-diao-shi-da-za-hui/">HotSpot JVM 调试大杂烩</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-21T11:19:33+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>11:19 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>此文的 JVM 环境特指 HotSpot JVM</p></blockquote>


<h2><a href="http://xmlandmore.blogspot.hk/2012/01/understanding-garbage-collection.html">Understanding Garbage Collection</a></h2>

<p>了解 JVM 内存回收机制，以及年轻代、伊甸园、年老代的意义。<a href="http://xmlandmore.blogspot.hk/2012/03/case-study-of-javalangoutofmemoryerror.html">Full GC</a> 发生很频繁时，关注是否分配内存不足<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>、死锁、或者内存泄露。</p>

<ul>
<li><a href="http://xmlandmore.blogspot.hk/2012/03/understanding-garbage-collector-output.html">Understanding Garbage Collector Output of Hotspot VM</a></li>
</ul>


<h2><a href="http://xmlandmore.blogspot.hk/2012/07/jstat-java-virtual-machine-statistics.html">jstat</a> - Statistics Monitoring</h2>

<p>一系列调试选项，常用 <code>jstat -gcutil</code> 排查内存问题。</p>

<h2><a href="http://xmlandmore.blogspot.hk/2013/04/analyze-hanging-programs-using-java.html">jstack</a> - Stack Trace</h2>

<ul>
<li><a href="http://xmlandmore.blogspot.hk/2012/08/understanding-jvm-thread-states.html">Generating Thread Dumps in HotSpot</a> - 等同于 <code>jstack [PID] &gt; threaddump.log</code></li>
<li><a href="http://geekexplains.blogspot.hk/2008/07/threadstate-in-java-blocked-vs-waiting.html">Thread.State in Java? BLOCKED vs WAITING</a></li>
<li><a href="https://community.oracle.com/blogs/sdo/2009/10/16/fun-jstack">Fun With JStack Blog</a></li>
<li><a href="http://stackoverflow.com/questions/28378592/java-thread-state-transition-waiting-to-blocked-or-runnable">Java thread state transition, WAITING to BLOCKED, or RUNNABLE?</a></li>
</ul>


<p>了解不同的线程状态。通常用来排查是否有死锁发生，以及找出高 CPU 消耗的线程状态。</p>

<ul>
<li><code>top -Hp [PID]</code> - 找出进程内最耗费CPU的线程</li>
<li><code>printf "%x\n" [PID]</code> - 得到线程号 TID</li>
<li><code>jstack [PID] | grep [TID]</code> - 观察线程信息</li>
</ul>


<p><img src="/images/JVM/states_trans.png"></p>

<h2><a href="http://xmlandmore.blogspot.hk/2013/08/diagnosing-outofmemoryerror-or-memory_10.html">jmap</a> - Memory Map</h2>

<p>分析 JVM 的内存状态，是排查内存泄露的关键。</p>

<ul>
<li><code>jmap -heap [PID]</code> - 进程堆内存使用情况</li>
<li><code>jmap -histo[:live] [PID] | head 15</code> - 对象占用图。对象占用图粒度很粗，无法获得更详细的对象状态</li>
<li><code>jmap -dump:format=b,file=dump.hprof [PID]</code> - 生成 <em>dump.hprof</em> 文件。执行时间稍长，基于此可进行进一步的精准分析</li>
</ul>


<h4><a href="http://xmlandmore.blogspot.hk/2014/01/eclipse-mat-understand-incoming-and.html">Eclipse MAT</a></h4>

<p>基于 <em>dump.hprof</em> 进行分析，首选主流工具 <em>Eclipse MAT</em>。<em>MAT</em> 可以开上帝视角，通过 <a href="http://xmlandmore.blogspot.hk/2014/01/eclipse-mat-querying-heap-objects-using.html">OQL</a> 精确定位到每个对象，用来做详细的分析挖掘很好用。不过它的缺点也很明显：重量级。如果 dump 文件不大，直接用 <em>MAT</em> 分析没有问题。但现实运行环境中，dump 文件通常很大<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>，一般需要面临以下问题：从服务器压缩传输到个人机器，压缩和传输的时间成本很高；解压缩后用 <em>MAT</em> 导入，如果个人机器的内存不够，无法进行解析<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>。</p>

<h5><a href="https://wiki.eclipse.org/MemoryAnalyzer/FAQ#Frequently_Asked_Questions">内存不够装进 Eclipse 的解决方案</a></h5>

<p>找到 <code>org.eclipse.equinox.launcher_1*.jar</code> 的本地目录，命令行执行生成索引过程：</p>

<p><code>java -jar /Users/hedley/eclipse/java-neon/Eclipse.app/Contents/Eclipse/plugins/org.eclipse.equinox.launcher_1*.jar -consoleLog -application org.eclipse.mat.api.parse dump.hprof org.eclipse.mat.api:suspects org.eclipse.mat.api:overview org.eclipse.mat.api:top_components</code> 生成报告，其中 <code>org.eclipse.mat.api:suspects</code>、<code>org.eclipse.mat.api:overview</code>、<code>org.eclipse.mat.api:top_components</code> 是生成的三个主要模块，可根据需要配置。再用 <em>Eclipse</em> 打开报告目录。</p>

<blockquote><p>如果以上命令还报内存不足，尝试加参数 -Xmx4g -XX:-UseGCOverheadLimit</p></blockquote>


<p><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.memory.analyzer.doc/queryingheapobjects.html">OQL2</a></p>

<h4><a href="http://dr-brenschede.de/bheapsampler/">BHeapSampler</a></h4>

<p><em>BHeapSampler</em> 是一款轻量级的 JVM 内存分析工具。不，它不单单是轻量级，是羽毛级！如果用 <em>MAT</em>，通常需要把臃肿的 <em>dump.hprof</em> 传到本机进行操作<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>。而 <em>BHeapSampler</em> 是一个大小只有 <em><em>26K</em></em> 的 <em>jar</em> 包，上传到服务器一行指令即可进行分析。它分析得到的是一张<strong>大内存对象引用图</strong>，不能进行任何操作与细项查询索引。但是这张重点鲜明的内存图，有时会比 <em>MAT</em> 更击中要害。大写的赞。</p>

<ul>
<li><code>java -Xmx40g -XX:-UseGCOverheadLimit -jar bheapsampler.jar dump.hprof</code> - 得到 <em>memory_graph.dot</em></li>
<li>可以用 <a href="http://graphviz.org/Download_macos.php">Graphviz</a> 查看 <em>.dot</em> 文件，装完也可以将 <em>.dot</em> 转为 <em>pdf</em> 格式： <code>/opt/local/bin/dot -Tpdf -omemory_graph.pdf memory_graph.dot</code></li>
</ul>


<h5>Mac 安装 <em>Graphviz</em></h5>

<p><img src="/images/JVM/graphviz.png"></p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/09/21/jvm-diao-shi-da-za-hui/'><a href="http://hedleyyan.github.io/blog/2016/09/21/jvm-diao-shi-da-za-hui/">http://hedleyyan.github.io/blog/2016/09/21/jvm-diao-shi-da-za-hui/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>For old generation space OutOfMemoryErrors, increase -Xms and -Xmx; For permanent generation OutOfMemoryErrors, increase -XX:PermSize and -XX:MaxPermSize<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>我曾经分析过的线上压力一般服务器的 dump 在 10G 左右<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>Eclipse 在导入 dump 文件后，会进行索引分析，占用大量内存。内存不足时会报 OutOfMemoryError<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>很少有人在服务器上装 Eclipse 吧？<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/">Eclipse 轻松 Debug 反编译源代码</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-01-27T09:47:58+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:47 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>安装反编译源码插件：<a href="http://jd.benow.ca/">JD-Eclipse</a></li>
<li>安装基于 <em>JD-Eclipse</em> 的代码重组插件：<a href="https://gauchoacomecable.wordpress.com/2011/10/14/eclipse-debug-java-without-source-code-jd-eclipse-and-realignment/">Realignment Fragment</a>

<ul>
<li>反编译源码的工具满街都是，但这个行数重组对齐的强化插件才是真的屌</li>
</ul>
</li>
<li>Happy Debug!</li>
</ul>


<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/'><a href="http://hedleyyan.github.io/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/">http://hedleyyan.github.io/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/15/code-folding-plugin-4-eclipse/">Code Folding Plugin 4 Eclipse</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-01-15T16:51:38+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:51 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>生活中有很多小巧惊艳的效率工具，它们使世界更美好。</p>

<p><em>Coffee-Bytes code folding</em> 是基于 <em>eclipse</em> 的一款代码折叠小插件。 <a href="http://hedleyyan.github.io/downloads/resource/code_folding.rar">戳我下载</a></p>

<h2>安装</h2>

<p>解压缩后，把 <code>features</code> 和 <code>plugins</code> 中的文件分别拷贝到 <em>eclipse</em> 根目录下的相应位置，安装完毕。</p>

<p>在 <em>eclipse</em> 配置选项中，更换 <em>Folding</em> 标签页下的折叠类型选项，重启 <em>eclipse</em> 生效。</p>

<h2>配置</h2>

<p>打开 <code>General</code> 标签下最后的 <code>User Defined Regions</code>，在相应标签下自定义你习惯的代码折叠块的开始和结束标记。</p>

<p><img src="/images/code_folding/1.png"></p>

<p><img src="/images/code_folding/2.png"></p>

<p><img src="/images/code_folding/3.png"></p>

<ul>
<li>建议把 <code>Advanced</code> 标签下的选项全部勾选，这样在折叠代码的时候会甩下最后一行，尤其 <code>if / else if</code> 代码块的折叠效果会更精准</li>
</ul>


<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/01/15/code-folding-plugin-4-eclipse/'><a href="http://hedleyyan.github.io/blog/2016/01/15/code-folding-plugin-4-eclipse/">http://hedleyyan.github.io/blog/2016/01/15/code-folding-plugin-4-eclipse/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/27/sed-xun-huan-chu-li/">Sed 循环处理</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-27T17:38:03+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>sed</em> 是 <em>shell</em> 编程中很常见的流编辑命令，主要用于批量替换。</p>

<p><em>sed</em> 的默认编辑单位是『行』，如果要处理的信息分布于多个行中，需要考虑多行处理命令：<em>N、P、D</em>。<em><a href="http://www.grymoire.com/Unix/Sed.html#uh-51">click here, nice tutorial</a></em></p>

<p>考虑以下情景：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% cat onetwo                                                                            
</span><span class='line'>one two onw two one two xxx one
</span><span class='line'>two yyy one
</span><span class='line'>two zzz one    
</span><span class='line'>two kkk two one
</span><span class='line'>twx xxx yyy one two one
</span><span class='line'>xxxxx
</span><span class='line'>xxx
</span><span class='line'>
</span><span class='line'>yyy one 
</span><span class='line'>x two one
</span><span class='line'>xx one
</span><span class='line'>
</span><span class='line'>two x
</span><span class='line'>x one
</span><span class='line'>two one
</span><span class='line'>two</span></code></pre></td></tr></table></div></figure>


<p>如果一行以 <em>one</em> 结尾，而且下一行以 <em>two</em> 开头，那么就把这两个邻接行拼接成一行，并把 <em>one two</em> 替换为 <em>1 2</em>。</p>

<p>在只了解 <em>N、P、D</em> 之后，想出一个比较有意思的解决方案：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% cat onetwo.sed
</span><span class='line'>#!/usr/bin/sed -f
</span><span class='line'>/one *$/ {
</span><span class='line'>        # 连接下一行，$!N 表示如果读到最后一行单独处理 
</span><span class='line'>        $!N
</span><span class='line'>        # 替换 prefix + one + 回车符 + two 为 回车符 + prefix + 1 2
</span><span class='line'>        s/^\(.*\)one *\ntwo/\
</span><span class='line'>\11 2/
</span><span class='line'>        /^\n/ !P
</span><span class='line'>        D
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>表达式 <em>s/a/b/</em> 中，查找字符串 <em>a</em> 如果包含回车符，用 <code>\n</code> 表示。但是如果替换字符串 <em>b</em> 中如果包含回车符，需要用 <code>\ + 回车</code> 表示。并且回车后的替换内容要顶头，不能排版加空格、tab<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。</p>

<p>以上解决方案的关键点在于替换时在开头又加了一个<strong>换行符</strong>，如此后面执行 <em>D</em> 则删除了模式空间中的这个<strong>空行</strong>，继续读入下一行处理，以此达到循环处理的目的。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% ./onetwo.sed onetwo
</span><span class='line'>one two onw two one two xxx 1 2 yyy 1 2 zzz 1 2 kkk two one
</span><span class='line'>twx xxx yyy one two one
</span><span class='line'>xxxxx
</span><span class='line'>xxx
</span><span class='line'>
</span><span class='line'>yyy one 
</span><span class='line'>x two one
</span><span class='line'>xx one
</span><span class='line'>
</span><span class='line'>two x
</span><span class='line'>x 1 2 1 2</span></code></pre></td></tr></table></div></figure>


<p>后面了解了 <em>t</em> 命令后，更直接的解决方案如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% cat onetwot.sed     
</span><span class='line'>#!/bin/bash 
</span><span class='line'>sed  '
</span><span class='line'>/one/ {
</span><span class='line'>        :again
</span><span class='line'>                $!N
</span><span class='line'>                s/one *\ntwo/1 2/
</span><span class='line'>                t again
</span><span class='line'>
</span><span class='line'>}
</span><span class='line'>' $1</span></code></pre></td></tr></table></div></figure>


<p><em>t</em> 命令相当于一个 <em>while</em>，当 <em>t</em> 之前最近的一个 <em>s/a/b/</em> 命令匹配成功时，继续循环。得到同样的运行结果。</p>

<p>此小实例只做趣味讨论，<em>shell</em> 中的流处理<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>都是面向<em>行</em><sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>为单位的，对于内容有 overlap 的循环处理，效率低且不好用。</p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/12/27/sed-xun-huan-chu-li/'><a href="http://hedleyyan.github.io/blog/2015/12/27/sed-xun-huan-chu-li/">http://hedleyyan.github.io/blog/2015/12/27/sed-xun-huan-chu-li/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>取决于不同的 sed 版本，但是顶头写肯定是 ok 的。<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>sed, awk, grep etc..<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>or 块，比如 awk 中的 FS=&lsquo;\n&rsquo;<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/18/prototype-pattern/">Java 如何实现 Prototype Pattern</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-18T14:53:29+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:53 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>看到  <a href="https://books.google.com.hk/books?id=FqfKFl4Bm7UC&amp;printsec=frontcover&amp;dq=software+architecture+design+patterns+in+java&amp;hl=en&amp;sa=X&amp;ved=0CB0Q6AEwAGoVChMIktPB556yxwIVhBcsCh3h_wwt#v=onepage&amp;q&amp;f=false">Software Architecture Design Patterns in Java</a> 的 <em>CREATIONAL PATTERNS: Prototype</em> <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>章节，忽感一阵恍惚。之前写<a href="/blog/2015/07/18/fu-ze-ren-zai-tan-callback-yu-delegation/">负责任再谈 Callback 与 Delegation</a> 时提到了 <strong>Java 不支持 Delegation</strong>，但是这篇设计模式却好像写如何在 Java 中实现 <em>Delegation</em>。此中涉及了 <code>Object.clone()</code> 方法、<code>Cloneable</code> 接口，真真一团乱麻。</p>

<h2>Prototype Pattern</h2>

<p>先看 <em>Prototype Pattern</em> 的 <a href="https://en.wikipedia.org/wiki/Prototype_pattern">Wiki</a>，一开始提到的便是 <em>Not to be confused with Prototype-based programming</em>，<em>Delegation</em> 正是 <em>Prototype-based programming</em> 的语言特性<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>。总之，<em>Prototype Pattern</em> 是创建对象的一种方法，<em>Delegation</em> 是语言的一种天赋。</p>

<h2>clone() &amp;&amp; Cloneable Interface</h2>

<p>了解 <code>clone</code> 之前，看 <a href="https://books.google.com.hk/books?id=ka2VUBqHiWkC&amp;pg=PA54&amp;dq=Item+11:+OVERRIDE+CLONE+JUDICIOUSLY&amp;hl=en&amp;sa=X&amp;ved=0CB0Q6AEwAGoVChMI9vu89beyxwIVClssCh21QQYo#v=onepage&amp;q=Item%2011%3A%20OVERRIDE%20CLONE%20JUDICIOUSLY&amp;f=false">Effective Java, Item 11: Override clone judiciously</a> 是必修课！</p>

<p>随便翻看几个 Java 实现 <em>Prototype Pattern</em> 的例子『<a href="http://www.blackwasp.co.uk/Prototype.aspx">戳这里</a>、<a href="http://www.tutorialspoint.com/design_pattern/prototype_pattern.htm">戳这里</a>、<a href="http://howtodoinjava.com/2013/01/04/prototype-design-pattern-in-java/">戳这里</a>』，也包括最开始提到的 <em>CREATIONAL PATTERNS: Prototype</em>，都是通过 <code>Object</code> 基类中的 <code>clone()</code> 方法直接或间接实现的。</p>

<p><code>clone()</code> 方法是原生方法，它类似 <code>new</code>，会生成新对象，也是一种“构造方法”，所以对构造方法的一些约束对其同样适用<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>。</p>

<p><code>clone()</code> 方法是 <code>protected</code> 方法，想要调用之还需要绑定 <code>Cloneable</code> 接口。这个奇葩设定很恶心，虽说<strong>约定优于配置</strong>，但这种约定实在是太不优雅。按照地球人的理解，一个接口应该提供一种服务，<code>Cloneable</code> 接口提供 <code>clone()</code> 方法天经地义，但又由于其特殊性，<code>clone()</code> 方法的原生实现 Java 需要自己提供，而接口声明的方法又不能给出一个默认实现<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>，然后这个 <code>clone()</code> 方法便写在了 <code>Object</code> 里，<code>Cloneable</code> 接口只是作为一个标识接口用：所有实现了 <code>Cloneable</code> 的类需要重写 <code>clone()</code> 方法，通过 <code>super.clone()</code> 来调用 <code>Object.clone()</code> 的原生实现，然后根据需要再做一些适当的调整。</p>

<p>所谓适当的调整，是因为 <code>Object</code> 的 <code>clone()</code> 方法只是 <em>shallow copy</em>，如此 <em>clone</em> 出来的对象，其包含的 <em>mutable</em> 的引用还是同一个引用，并非副本。</p>

<blockquote><p>By convention, the object returned by this method should be independent of this object (which is being cloned). To achieve this independence, it may be necessary to modify one or more fields of the object returned by super.clone before returning it. Typically, this means copying any mutable objects that comprise the internal &#8220;deep structure&#8221; of the object being cloned and replacing the references to these objects with references to the copies. If a class contains only primitive fields or references to immutable objects, then it is usually the case that no fields in the object returned by super.clone need to be modified.</p><footer><strong>Object.clone() 说明</strong></footer></blockquote>


<p>了解了这些之后，你以为就可以妥妥的使用 <code>clone()</code> 了吗？还要注意这些限制</p>

<ul>
<li>All classes that implement Cloneable should override clone with a public method whose return type is the class itself.</li>
<li>If you override the clone method in a nonfinal class, you should return an object obtained by invoking super.clone. If all of a class’s superclasses obey this rule, then invoking super.clone will eventually invoke Object’s clone method, creating an instance of the right class.</li>
<li>In effect, the clone method functions as another constructor; you must ensure that it does no harm to the original object and that it properly establishes invariants on the clone.</li>
<li>Like a constructor, a clone method should not invoke any nonfinal methods on the clone under construction.</li>
<li>The clone architecture is incompatible with normal use of final fields referring to mutable objects.</li>
<li>Object’s clone method is declared to throw CloneNotSupportedException, but overriding clone methods can omit this declaration. Public clone methods should omit it because methods that don’t throw checked exceptions are easier to use.</li>
<li>If you decide to make a thread-safe class implement Cloneable, remember that its clone method must be properly synchronized just like any other method.</li>
<li>Given all of the problems associated with Cloneable, it’s safe to say that other interfaces should not extend it, and that classes designed for inheritance (Item 17) should not implement it.</li>
</ul>


<p>鉴于以上种种，我们可以很保守的说：珍爱生命，远离 <em>clone()</em>。</p>

<h2>Copy Constructor || Copy Factory</h2>

<p>EJ 给出了一种替代解决方案：copy constructor or copy factory。它对比 <code>clone()</code> 简直好处多多：不需要受奇葩语意约束、不会和 <code>final</code> 标识的属性冲突、不抛出无意义的异常、不需要类型转换。</p>

<p><img src="/images/copy_constructor.png"></p>

<p><em>copy constructor</em> 接受的参数是其自身实现的接口类型，它们其实类属于 <em>conversion constructor</em>。注意 <code>HashMap</code> 与 <code>Collection</code> 的构造方法里，都有这种 <em>conversion constructor</em>，但是它们都是 <em>shallow copy</em>。</p>

<h2>序列化以及其他</h2>

<p><a href="http://stackoverflow.com/questions/23892962/is-object-deserialization-a-proper-way-to-implement-prototype-pattern-in-java">Is Object deserialization a proper way to implement Prototype pattern in Java?</a> 细致讨论了通过序列化实现 <em>Prototype Pattern</em> 的可能性。结论是<strong>可以</strong>，但代价是巨大的，还不如 <code>clone</code> 呢！其实 XML、JSON 都可以作为实现原型模式的手段，只要能得到一个对象的副本就行了呗。问题中的每一个回答每一个评论都值得细细品味。</p>

<p><img src="/images/kluge.png"></p>

<p><font size="8px"><strong>kluge</strong></font> [英][k&#8217;lu:dʒ] [美][k&#8217;lu:dʒ]  &nbsp;&nbsp; n.由不配套的元件拼凑而成的计算机，异机种系统</p>

<p><a href="http://stackoverflow.com/questions/665860/deep-clone-utility-recomendation/">Deep clone utility recomendation.</a> 给出了实现 <em>deep clone</em> 的一个开源类库 <em><a href="https://github.com/kostaskougios/cloning">The cloning library</a></em>，此贴子的回答评论同样精彩。略看了一眼 <em>The cloning library</em> 的简介和评价，期待度较高，貌似是通过反射实现的，等有空研究一下代码再表。</p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/08/18/prototype-pattern/'><a href="http://hedleyyan.github.io/blog/2015/08/18/prototype-pattern/">http://hedleyyan.github.io/blog/2015/08/18/prototype-pattern/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>Page 95.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>language feature<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>主要就是这一条：Never call overridable methods from constructors, either directly or indirectly.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>JKD8 可以做到，咋不早出这个特性嘞<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/">MySQL5.5 以下版本通过 Java 转义实现 Emoji 存取</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-05T22:41:19+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:41 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>我不输出好文，我只是好文的搬运工。<a href="http://cenalulu.github.io/linux/character-encoding">十分钟搞清字符集和字符编码</a>带你走进 <em>Unicode</em> 和 <em>UTF-8</em> 的前世今生。总而言之，<em>Unicode</em> 是标准，<em>UTF-8</em> 是实现。</p>

<h2>MySQL 过招 <em>Emoji</em></h2>

<p>通常 MySQL 的默认字符集都会配置为 <em>UTF-8</em>，只支持单字符不超过 3 bytes 的存储<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。常见的 <em><a href="https://en.wikipedia.org/wiki/Emoji">Emoji</a></em> 的 <em>Unicode</em> 编码值 <em>code point</em> 位于 <code>\u1F601 -- \u1F64F</code> 区间，以 <code>\u1F300</code> 『🌀』举例，它的二进制有 17 位，无法用三字节的 <em>UTF-8</em> 编码表示<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>。如果通过 JDBC 将此字符尝试插入 MySQL 记录中，会得到以下异常</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>java.lang.RuntimeException: java.sql.SQLException: Incorrect string value: '\xF0\x9F\x8C\x80' for column 'message' at row 1 </span></code></pre></td></tr></table></div></figure>


<h2>Java 过招 <em>Emoji</em></h2>

<p>Java 存储字符的单元是 <code>char</code>，那么问题来了，16 位的 <code>char</code> 如何 handle 17 位的 <em>Unicode</em> 呢？</p>

<p><img src="/images/doughnut.png"></p>

<p>喜闻乐见，Java 的单个 <code>char</code> 确实无法 handle 🌀。那么 ⚡ 为什么可以通过编译？相信聪明如你，一定可以查到 ⚡ 的 <em>Unicode</em> 是 <code>\u26A1</code>，Tada ~~ 所以 ⚡ 插入数据库中也是妥妥的。</p>

<p>速入 <a href="http://www.czyborra.com/utf/#Java">Java&rsquo;s Unicode Notation</a> 科普一下 Java 对 <em>Unicode</em> 的支持实现，配合<a href="http://chenbochiuan.vip.blog.163.com/blog/static/172332969201072784730795/">通俗易懂版</a>更赞<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>。原来 Java 存储单个字符的最小单元并不一定是单个 <code>char</code>，而是根据 <em>code point</em> 的范围确定。如果字符 <code>c</code> 的 <em>code point</em> 二进制表示不超过 16 位那么单个 <code>char</code> 可直接表示<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>；否则要进行以下处理，以 🌀 举例</p>

<ul>
<li>把 <code>\u1F300</code> 的二进制表示 <code>0001 11110011 00000000</code>，其高 10 位与低 10 位拆开备用</li>
<li>高位偏移量 W1 : <code>0xD7C0</code> 与低位偏移量 W2 : <code>0xDC00</code> 分别与其高低 10 位相加处理，得到 <code>\uD83C</code> 与 <code>\uDF00</code><sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup></li>
<li>两个字符拼接 <code>\uD83C\uDF00</code> 得到 🌀</li>
</ul>


<figure class='code'><figcaption><span> (EmojiCharacter.java)</span> <a href='/downloads/code/EmojiCharacter.java'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">unicode</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmojiCharacter</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// high offset</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">W1</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&quot;D7C0&quot;</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// low offset</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">W2</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&quot;DC00&quot;</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="c1">// 🌀的二进制字符串表示</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">doughnutBinary</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toBinaryString</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&quot;1F300&quot;</span><span class="o">,</span><span class="mi">16</span><span class="o">));</span>
</span><span class='line'>        <span class="c1">// 拆成高低 10 位表示</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">highSetsBinary</span> <span class="o">=</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">10</span><span class="o">);</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">lowSetsBinary</span> <span class="o">=</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">doughnutBinary</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">10</span><span class="o">,</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highSetsBinary</span><span class="o">);</span>     <span class="c1">//    1111100</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lowSetsBinary</span><span class="o">);</span>      <span class="c1">//    1100000000</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// 分别与偏移量相加，得到两个编码值</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">highSetsHexFixed</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="n">W1</span> <span class="o">+</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">highSetsBinary</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">lowSetsHexFixed</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="n">W2</span> <span class="o">+</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lowSetsBinary</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highSetsHexFixed</span><span class="o">);</span>   <span class="c1">//    d83c</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lowSetsHexFixed</span><span class="o">);</span>    <span class="c1">//    df00</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// 拼接这两个编码值，还原字符表示</span>
</span><span class='line'>        <span class="kt">char</span> <span class="n">highChar</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">highSetsHexFixed</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
</span><span class='line'>        <span class="kt">char</span> <span class="n">lowChar</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lowSetsHexFixed</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highChar</span><span class="o">);</span>           <span class="c1">//    ?     </span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lowChar</span><span class="o">);</span>            <span class="c1">//    ?</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highChar</span> <span class="o">+</span> <span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">lowChar</span><span class="o">);</span>    <span class="c1">//    🌀</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>合体</h2>

<p>Client 发送 <em>Emoji</em> 到后台，Java 却无法通过 JDBC 将其存储到 MySQL。如果我们遵循某个特定的转换规则，存储前转义一次，读取时再逆转义一次，那不就妥妥妥的了。你当然可以自己写，但是懒逼如我，更倾向于找<a href="https://github.com/vdurmont/emoji-java/">现货</a>。</p>

<h2>引用</h2>

<ul>
<li><a href="http://cenalulu.github.io/linux/character-encoding">十分钟搞清字符集和字符编码</a></li>
<li><a href="http://www.czyborra.com/utf/#Java">Java&rsquo;s Unicode Notation</a></li>
<li><a href="http://stackoverflow.com/questions/2220366/get-unicode-value-of-a-character">Get unicode value of a character</a></li>
<li><a href="http://stackoverflow.com/questions/6617491/how-to-convert-a-string-representation-of-unicode-hex-0x20000-to-the-int-code">Get character of a unicode value</a></li>
<li><a href="http://code.iamcal.com/php/emoji/">Full Emoji Catalog</a></li>
<li><a href="https://github.com/vdurmont/emoji-java/">emoji-java</a></li>
</ul>


<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/'><a href="http://hedleyyan.github.io/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/">http://hedleyyan.github.io/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>MySQL5.5 版本以后有对 <em>4 bytes</em> 单字符的原生支持，字符集配置为 <em>utf8mb4</em><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>请看十分钟系列的实现细节，三字节的 <em>UTF-8</em> 编码上限是 16 位『4 + 6 + 6』，<code>11111 001100 000000</code> 对应的 <em>UTF-8</em> 编码为 <code>11110000 10011111 10001100 10000000</code>，即 <strong>\xF0</strong>&hellip;，MySQL 经常会冒出这种异常<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>勘误，通俗版中所说的 W1 : <code>0xD800</code> 不对，应是 <code>0xD7C0</code>，已在评论中反映给原作者<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>比如『⚡』<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
<li id="fn:5">
<p><em>Unicode</em> 预留了替代区域 <code>\uD800 -- \uDFFF</code> 作为辅助，此区间的单个字符没有实际表示意义<a href="#fnref:5" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/">bigfoot.js 注脚之 Octopress 篇</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-31T09:41:35+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>9:41 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>对于一个不懂前端技术的人，能实现 bigfoot.js 动态注脚实在是太刺激了<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>。其实<a href="http://www.bigfootjs.com/">官网</a>上说的已经够多，但前端白痴如我，还是绕了好多弯子，捉急<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>。</p>

<h2>下载</h2>

<p>下载 <a href="http://www.bigfootjs.com/download/bigfoot.zip">bigfoot.js 源码</a>，解压缩后其中的 <code>bigfoot.js</code> 和 <code>bigfoot-default.scss</code> 有用，其他可删。</p>

<p>还需要 <code>jquery</code> 模块支持，我用的是 <code>jquery-1.9.1.min.js</code>。你可以通过 <code>command</code> + <code>alt</code> + <code>i</code> 组合键打开开发人员工具<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>，通过 <code>Source</code> ▶ <code>javascripts</code> ▶️ <code>jquery-1.9.1.min.js</code> ▶️ 右键 ▶️ <code>Save</code> 来获取<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>。</p>

<p><img src="/images/bigfoot/findJS.png" width="750" height="500"></p>

<h2>加载</h2>

<p><code>bigfoot.js</code> 拖到 <code>source/javascripts</code> 文件夹，然后编辑 <code>source/_includes/custom/head.html</code>。添加以下代码</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/javascripts/jquery-1.9.1.min.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/javascripts/bigfoot.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">bigfoot</span><span class="p">();</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>bigfoot-default.scss</code> 拖到 <code>sass/custom</code>，在 <code>sass/custom/_styles.scss</code> 中注册。一行代码</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="k">@import</span> <span class="s2">&quot;bigfoot-default.scss&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>footnotes</h2>

<p>保证你的 <em>octopress</em> 注脚插件已注册，<code>_config.yml</code> 默认是注册的，<em>kramdown</em> 也可以</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">markdown</span><span class="o">:</span> <span class="n">rdiscount</span>
</span><span class='line'><span class="n">rdiscount</span><span class="o">:</span>
</span><span class='line'>  <span class="n">extensions</span><span class="o">:</span>
</span><span class='line'>    <span class="o">-</span> <span class="n">footnotes</span>
</span></code></pre></td></tr></table></div></figure>


<p>然后语法是这样</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">对于一个不懂前端技术的人，能实现</span><span class="err"> </span><span class="na">bigfoot.js</span><span class="err"> </span><span class="na">动态注脚实在是太刺激了</span><span class="err">[</span><span class="na">^1]。</span>
</span><span class='line'><span class="na">......</span>
</span><span class='line'>
</span><span class='line'><span class="err">[</span><span class="na">^1]</span><span class="o">:</span> <span class="err">效果赞炸</span>   
</span></code></pre></td></tr></table></div></figure>


<h2>可能的问题</h2>

<h3>什么都做了但没卵用</h3>

<p>到这里如果没有意外应该就是妥妥的了，不幸的是我正是意外制造机。折腾了半天发现没有卵用，还是默认的 <em>octopress footnotes</em> 的效果，打开控制台发现有一行诡异的错误输出</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">Uncaught</span><span class="err"> </span><span class="na">TypeError</span><span class="o">:</span> <span class="err">$</span><span class="o">.</span><span class="n">bigfoot</span> <span class="n">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">function</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/bigfoot/bigfoot_exception.png" width="750" height="500"></p>

<p>这是闹啥嘞，明明就是从官网 copy 下来的啊。找了两个使用了 bigfoot 的网页<sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup>看其源代码，根本就是一样的嘛为毛我这报错？</p>

<p>开始以为是和页脚自动生成原文链接那有冲突，卸了还是一样报错。几番折腾，发现了破解大法：<strong>把 bigfoot.js 的注册写在 head.html 的开头</strong>。为什么会这样我不知道，如果好心的你知道可能的原因就偷偷告诉我吧！</p>

<p>移魂大法以后不报错了，显示也妥，只是在页尾还是有冗余的注脚信息。参照 <a href="http://www.bigfootjs.com/#options">options</a> 给我们的 bigfoot 加一些修饰</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">bigfoot</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">actionOriginalFN</span><span class="o">:</span> <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">activateOnHover</span><span class="o">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">deleteOnUnhover</span><span class="o">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">hoverDelay</span><span class="o">:</span> <span class="s2">&quot;500&quot;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>首页不显示效果</h3>

<p>如果 <em>Post</em> 里用了 <code>&lt;!--more--&gt;</code> 分页，那么显示在首页的注脚是没有效果的</p>

<p><img src="/images/bigfoot/compare_1.png" width="500" height="250" title="首页" ></p>

<p><font size="24px" color="red"><em>VS</em></font></p>

<p><img src="/images/bigfoot/compare_2.png" width="500" height="250" title="Post" ></p>

<p>这个没想到简单的解决办法<sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup>，要么分页前部分不包括注脚，要么不分页。</p>

<p>大功告成，撒花 🌺🌺</p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/'><a href="http://hedleyyan.github.io/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/">http://hedleyyan.github.io/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>效果赞炸<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>但能实现才是最牛逼的    <a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>For MAC, Windows 平台的快捷键是 F12<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>我是前端小白，我期待你也是，不许笑<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
<li id="fn:5">
<p>http://blog.honekamp.net/blog/2013/12/23/bigfoot-on-the-main-page/<a href="#fnref:5" rev="footnote">&#8617;</a></p></li>
<li id="fn:6">
<p>80/20, leave it alone&hellip;<a href="#fnref:6" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/18/fu-ze-ren-zai-tan-callback-yu-delegation/">负责任再谈 Callback 与 Delegation</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-18T15:03:11+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:03 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>引出</h1>

<p>话接上回<a href="/blog/2015/07/10/zhuang-shi-zhe-mo-shi-decorate-pattern-yu-hui-diao-ji-zhi-callback-framework/">不负责瞎说说 Patterns 与 Frameworks</a>，还谈引出问题：<em>Wrapper classes are not suited for use in callback frameworks</em>。虽然最后给出了一个可以验证的 <em>Demo Code</em>，但是个中缘由仍影影绰绰，真相仿佛隔着一层薄纱在向我招手。心急难耐，遂从引出 <em>SELF problem</em> 的论文出发，顺藤摸瓜按图索骥，也许是我的真心打动了上天，也许是我太帅，幸得 <a href="http://blog.csdn.net/yqj2065">yqj2065</a> 老师指点，才把真相抱了个满怀。</p>

<p>幸福来的太快，虚幻又不真实，也许我看到的只是背影，又或许我看到的是庐山真面，放空思绪，容我一点点回忆。不知道待我从求知路上走的更远，回头再看今天的“负责任”是不是够炫酷呢。</p>

<p>先甩大招上结论</p>

<ul>
<li>Java 不支持 <em>delegation</em></li>
<li>C# 的 <em>delegate</em> 不是真正的 <em>delegate</em></li>
<li><a name="想法"><em>delegation</em> ：我只需要你的原型方法，但我不要依赖于你 </a></li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/07/18/fu-ze-ren-zai-tan-callback-yu-delegation/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/10/zhuang-shi-zhe-mo-shi-decorate-pattern-yu-hui-diao-ji-zhi-callback-framework/">不负责瞎说说 Patterns 与 Frameworks</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-10T17:11:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:11 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>引出</h1>

<p><a href="https://books.google.com.hk/books?id=ka2VUBqHiWkC&amp;pg=PA85&amp;dq=The+disadvantage+of+wrapper+classes&amp;hl=en&amp;sa=X&amp;ved=0CB0Q6AEwAGoVChMI5L-T5PnPxgIVCQuOCh1joQq6#v=onepage&amp;q=The%20disadvantage%20of%20wrapper%20classes&amp;f=false">Effective Java, Item 16</a> 中说 <em>Wrapper classes are not suited for use in callback frameworks</em>，想不明白，一顿 Google 依旧看个似懂非懂。我想把这些凌乱的线索都整理出来，抽抽剪剪排列组合一下，也许就看的透彻点了呢。</p>

<p>关于 <em>Wrapper class</em> 的引出问题，个人认为比较<a href="http://programmers.stackexchange.com/questions/117628/why-are-wrapper-classes-not-suited-for-use-in-callback-frameworks">炫酷的解答</a>。</p>

<blockquote><p>Because a wrapped object doesn&#8217;t know of its wrapper, it passes a reference to itself(this) and callbacks elude the wrapper. This is known as the SELF problem [Lieberman86]. This leads to subtle bugs, like the wrapper missing the event. Or the wrapper and wrapped object both registering for the same events - leading to duplicate processing and potential concurrency issues as well. If you don&#8217;t know (don&#8217;t have the source code) where callbacks are registered, it may be impossible to work around this problem.</p></blockquote>


<h1>Panttern? Framework?</h1>

<p>引出中的 <em>Wrapper class</em> 是 <em>Decorator pattern</em> 的引出概念，<em>callback frameworks</em> 是一种 <em>framework</em>。从翻译上看，<em>pattern</em> 译为 <strong>模式</strong>，<em>framework</em> 译为 <strong>框架</strong>。那么这个 <em>pattern</em> 与 <em>framework</em> 有毛的区别呢？</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/07/10/zhuang-shi-zhe-mo-shi-decorate-pattern-yu-hui-diao-ji-zhi-callback-framework/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1><i class="fa fa-tags"></i>&nbsp;Tags</h1>
  <ul class="tag-cloud">
    <a style="font-size: 105%" href="/tags/framework/">Framework</a>
<a style="font-size: 180%" href="/tags/java/">Java</a>
<a style="font-size: 70%" href="/tags/mysql/">MySQL</a>
<a style="font-size: 125%" href="/tags/pattern/">Pattern</a>
<a style="font-size: 105%" href="/tags/shell/">shell</a>
<a style="font-size: 151%" href="/tags/tips/">tips</a>
<a style="font-size: 125%" href="/tags/gui-yue/">规约</a>
<a style="font-size: 151%" href="/tags/pei-zhi/">配置</a>

  </ul>
</section>
<section>
  <h1><i class="fa fa-list"></i>&nbsp;Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/">OS X 通过命令行设置特定 IP</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/21/jvm-diao-shi-da-za-hui/">HotSpot JVM 调试大杂烩</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/">Eclipse 轻松 Debug 反编译源代码</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/15/code-folding-plugin-4-eclipse/">Code Folding Plugin 4 Eclipse</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/27/sed-xun-huan-chu-li/">Sed 循环处理</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/18/prototype-pattern/">Java 如何实现 Prototype Pattern</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/">MySQL5.5 以下版本通过 Java 转义实现 Emoji 存取</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/">bigfoot.js 注脚之 Octopress 篇</a>
      </li>
    
  </ul>
</section>
<section>
<h1><i class="fa fa-comments"></i>&nbsp;Recent Comments</h1>
<ul class="ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="26"></ul>

<!--多说js加载开始，一个页面只需要加载一次 -->
<script type="text/javascript">
  var duoshuoQuery = {short_name:"hedleyyan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!--多说js加载结束，一个页面只需要加载一次 -->

</section><section>
  <h1><i class="fa fa-globe"></i>&nbsp;Visitor Map</h1>
  <br>
  <script type="text/javascript" src="//rc.revolvermaps.com/0/0/0.js?i=2cpr3til0tz&amp;d=3&amp;p=1&amp;b=0&amp;w=268&amp;g=2&amp;f=arial&amp;fs=13&amp;r=0&amp;c0=362b05&amp;c1=375363&amp;c2=000000&amp;ic0=0&amp;ic1=0" async="async"></script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

<p>
  Copyright &copy; 2018 - hedley -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
  












  <script type="text/javascript" src="http://arrow.scrolltotop.com/arrow44.js"></script>
<noscript>Not seeing a <a href="http://www.scrolltotop.com/">Scroll to Top Button</a>? Go to our FAQ page for more info.</noscript>

</body>
</html>
