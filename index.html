
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hedley</title>
  <meta name="author" content="hedley">

  
  <meta name="description" content="æ­£æ–‡ ç”±äºæˆ‘è‡ªå·±æœºå™¨ä¸Šçš„æœåŠ¡å™¨é…ç½®ï¼Œåˆ°å…¬å¸è”ç½‘åï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½® IP 10.0.xx.xxã€‚ä¸€æ—¦å‡ºäº†å…¬å¸è¿å…¥å…¶ä»–ç½‘ç»œï¼Œåˆéœ€è¦æŠŠ IP æ”¹ä¸ºè‡ªåŠ¨è·å¾—ã€‚é€šå¸¸æ“ä½œé¡ºåºæ˜¯ ç³»ç»Ÿåå¥½è®¾ç½® -&gt; ç½‘ç»œ -&gt; Wi-Fi -&gt; é«˜çº§ -&gt; TCP/IP -&gt; ä½¿ç”¨ DHCPï¼Œå¾ˆéº»çƒ¦ &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hedleyyan.github.io/">
  <link href="/images/favicon_32.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Hedley" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--bigfoot-->
<script src="/javascripts/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="/javascripts/bigfoot.js" type="text/javascript"></script>
<script type="text/javascript">
  $.bigfoot({ 
    actionOriginalFN: "delete",
    activateOnHover: "true",
    deleteOnUnhover: "true",
    hoverDelay: "500"
  });
</script>

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!--ç‚¹å‡»åšå®¢å†…é“¾æ¥ï¼Œåœ¨æ–°çª—å£ä¸­æ‰“å¼€-->
<script type="text/javascript">
  function addBlankTargetForLinks () {
    $('a[href^="http"]').each(function(){
        $(this).attr('target', '_blank');
    });
  }

  $(document).bind('DOMNodeInserted', function(event) {
    addBlankTargetForLinks();
  });
</script>

<!--TOC-->
<script src="/javascripts/jquery.tableofcontents.min.js" type="text/javascript"></script>
<script type="text/javascript">
  // Revert jQuery's '$' alias, to avoid clashes with ender.js. NOTE: Use
  // jQuery(...), instead of $(...) from here on.
  jQuery.noConflict();
</script>
<script src="/javascripts/generate-toc.js" type="text/javascript"></script>

<!--Font awesome-->
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div class="header">
    <h1 class="blog-title"><a href="/">Hedley</a></h1>
    
      <h2 class="blog-subtitle">Stay Hungry, Stay Foolish.</h2>
    
  </div>
</hgroup>
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">&nbsp;RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="hedleyyan.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/"><i class="fa fa-home"></i>&nbsp;é¦–é¡µ</a></li>
  <li><a href="/blog/archives"><i class="fa fa-archive"></i>&nbsp;å½’æ¡£</a></li>
  <li><a href="/blog/gallery"><i class="fa fa-picture-o"></i>&nbsp;ç”»å»Š</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/">OS X é€šè¿‡å‘½ä»¤è¡Œè®¾ç½®ç‰¹å®š IP</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-10-10T22:07:02+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>10:07 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>æ­£æ–‡</h2>

<p>ç”±äºæˆ‘è‡ªå·±æœºå™¨ä¸Šçš„æœåŠ¡å™¨é…ç½®ï¼Œåˆ°å…¬å¸è”ç½‘åï¼Œéœ€è¦æ‰‹åŠ¨è®¾ç½® IP <code>10.0.xx.xx</code>ã€‚ä¸€æ—¦å‡ºäº†å…¬å¸è¿å…¥å…¶ä»–ç½‘ç»œï¼Œåˆéœ€è¦æŠŠ IP æ”¹ä¸ºè‡ªåŠ¨è·å¾—ã€‚é€šå¸¸æ“ä½œé¡ºåºæ˜¯ <code>ç³»ç»Ÿåå¥½è®¾ç½® -&gt; ç½‘ç»œ -&gt; Wi-Fi -&gt; é«˜çº§ -&gt; TCP/IP -&gt; ä½¿ç”¨ DHCP</code>ï¼Œå¾ˆéº»çƒ¦ã€‚</p>

<p>æŸ¥é˜…äº†ä¸€äº›èµ„æ–™ï¼ŒMac OS X å…¶å®å¯ä»¥é€šè¿‡å‘½ä»¤è¡Œæ¥æ‰§è¡Œï¼š</p>

<ul>
<li><code>sudo networksetup -setmanualwithdhcprouter Wi-Fi 10.0.xx.xx</code> - æ‰‹åŠ¨è®¾ç½® IP</li>
<li><code>sudo networksetup -setdhcp Wi-Fi</code> - è‡ªåŠ¨è·å¾— IP</li>
</ul>


<p>å¯ä»¥å†™å…¥è„šæœ¬ï¼Œé…åˆ <a href="https://www.alfredapp.com/">Alfred</a> çš„ Workflows åŠŸèƒ½æ›´èµã€‚</p>

<h2>å¼•ç”¨</h2>

<p><a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man8/networksetup.8.html">OS X Man Pages</a></p>

<p><a href="http://serverfault.com/questions/638949/os-x-command-line-ipv4-interface-reset">OS X Command Line IPv4 interface Reset</a></p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/'><a href="http://hedleyyan.github.io/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/">http://hedleyyan.github.io/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/09/21/jvm-diao-shi-da-za-hui/">HotSpot JVM è°ƒè¯•å¤§æ‚çƒ©</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-09-21T11:19:33+08:00'><span class='date'><span class='date-month'>Sep</span> <span class='date-day'>21</span><span class='date-suffix'>st</span>, <span class='date-year'>2016</span></span> <span class='time'>11:19 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>æ­¤æ–‡çš„ JVM ç¯å¢ƒç‰¹æŒ‡ HotSpot JVM</p></blockquote>


<h2><a href="http://xmlandmore.blogspot.hk/2012/01/understanding-garbage-collection.html">Understanding Garbage Collection</a></h2>

<p>äº†è§£ JVM å†…å­˜å›æ”¶æœºåˆ¶ï¼Œä»¥åŠå¹´è½»ä»£ã€ä¼Šç”¸å›­ã€å¹´è€ä»£çš„æ„ä¹‰ã€‚<a href="http://xmlandmore.blogspot.hk/2012/03/case-study-of-javalangoutofmemoryerror.html">Full GC</a> å‘ç”Ÿå¾ˆé¢‘ç¹æ—¶ï¼Œå…³æ³¨æ˜¯å¦åˆ†é…å†…å­˜ä¸è¶³<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã€æ­»é”ã€æˆ–è€…å†…å­˜æ³„éœ²ã€‚</p>

<ul>
<li><a href="http://xmlandmore.blogspot.hk/2012/03/understanding-garbage-collector-output.html">Understanding Garbage Collector Output of Hotspot VM</a></li>
</ul>


<h2><a href="http://xmlandmore.blogspot.hk/2012/07/jstat-java-virtual-machine-statistics.html">jstat</a> - Statistics Monitoring</h2>

<p>ä¸€ç³»åˆ—è°ƒè¯•é€‰é¡¹ï¼Œå¸¸ç”¨ <code>jstat -gcutil</code> æ’æŸ¥å†…å­˜é—®é¢˜ã€‚</p>

<h2><a href="http://xmlandmore.blogspot.hk/2013/04/analyze-hanging-programs-using-java.html">jstack</a> - Stack Trace</h2>

<ul>
<li><a href="http://xmlandmore.blogspot.hk/2012/08/understanding-jvm-thread-states.html">Generating Thread Dumps in HotSpot</a> - ç­‰åŒäº <code>jstack [PID] &gt; threaddump.log</code></li>
<li><a href="http://geekexplains.blogspot.hk/2008/07/threadstate-in-java-blocked-vs-waiting.html">Thread.State in Java? BLOCKED vs WAITING</a></li>
<li><a href="https://community.oracle.com/blogs/sdo/2009/10/16/fun-jstack">Fun With JStack Blog</a></li>
<li><a href="http://stackoverflow.com/questions/28378592/java-thread-state-transition-waiting-to-blocked-or-runnable">Java thread state transition, WAITING to BLOCKED, or RUNNABLE?</a></li>
</ul>


<p>äº†è§£ä¸åŒçš„çº¿ç¨‹çŠ¶æ€ã€‚é€šå¸¸ç”¨æ¥æ’æŸ¥æ˜¯å¦æœ‰æ­»é”å‘ç”Ÿï¼Œä»¥åŠæ‰¾å‡ºé«˜ CPU æ¶ˆè€—çš„çº¿ç¨‹çŠ¶æ€ã€‚</p>

<ul>
<li><code>top -Hp [PID]</code> - æ‰¾å‡ºè¿›ç¨‹å†…æœ€è€—è´¹CPUçš„çº¿ç¨‹</li>
<li><code>printfÂ "%x\n"Â [PID]</code> - å¾—åˆ°çº¿ç¨‹å· TID</li>
<li><code>jstackÂ [PID]Â |Â grepÂ [TID]</code> - è§‚å¯Ÿçº¿ç¨‹ä¿¡æ¯</li>
</ul>


<p><img src="/images/JVM/states_trans.png"></p>

<h2><a href="http://xmlandmore.blogspot.hk/2013/08/diagnosing-outofmemoryerror-or-memory_10.html">jmap</a> - Memory Map</h2>

<p>åˆ†æ JVM çš„å†…å­˜çŠ¶æ€ï¼Œæ˜¯æ’æŸ¥å†…å­˜æ³„éœ²çš„å…³é”®ã€‚</p>

<ul>
<li><code>jmap -heap [PID]</code> - è¿›ç¨‹å †å†…å­˜ä½¿ç”¨æƒ…å†µ</li>
<li><code>jmap -histo[:live] [PID] | head 15</code> - å¯¹è±¡å ç”¨å›¾ã€‚å¯¹è±¡å ç”¨å›¾ç²’åº¦å¾ˆç²—ï¼Œæ— æ³•è·å¾—æ›´è¯¦ç»†çš„å¯¹è±¡çŠ¶æ€</li>
<li><code>jmapÂ -dump:format=b,file=dump.hprof [PID]</code> - ç”Ÿæˆ <em>dump.hprof</em> æ–‡ä»¶ã€‚æ‰§è¡Œæ—¶é—´ç¨é•¿ï¼ŒåŸºäºæ­¤å¯è¿›è¡Œè¿›ä¸€æ­¥çš„ç²¾å‡†åˆ†æ</li>
</ul>


<h4><a href="http://xmlandmore.blogspot.hk/2014/01/eclipse-mat-understand-incoming-and.html">Eclipse MAT</a></h4>

<p>åŸºäº <em>dump.hprof</em> è¿›è¡Œåˆ†æï¼Œé¦–é€‰ä¸»æµå·¥å…· <em>Eclipse MAT</em>ã€‚<em>MAT</em> å¯ä»¥å¼€ä¸Šå¸è§†è§’ï¼Œé€šè¿‡ <a href="http://xmlandmore.blogspot.hk/2014/01/eclipse-mat-querying-heap-objects-using.html">OQL</a> ç²¾ç¡®å®šä½åˆ°æ¯ä¸ªå¯¹è±¡ï¼Œç”¨æ¥åšè¯¦ç»†çš„åˆ†ææŒ–æ˜å¾ˆå¥½ç”¨ã€‚ä¸è¿‡å®ƒçš„ç¼ºç‚¹ä¹Ÿå¾ˆæ˜æ˜¾ï¼šé‡é‡çº§ã€‚å¦‚æœ dump æ–‡ä»¶ä¸å¤§ï¼Œç›´æ¥ç”¨ <em>MAT</em> åˆ†ææ²¡æœ‰é—®é¢˜ã€‚ä½†ç°å®è¿è¡Œç¯å¢ƒä¸­ï¼Œdump æ–‡ä»¶é€šå¸¸å¾ˆå¤§<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>ï¼Œä¸€èˆ¬éœ€è¦é¢ä¸´ä»¥ä¸‹é—®é¢˜ï¼šä»æœåŠ¡å™¨å‹ç¼©ä¼ è¾“åˆ°ä¸ªäººæœºå™¨ï¼Œå‹ç¼©å’Œä¼ è¾“çš„æ—¶é—´æˆæœ¬å¾ˆé«˜ï¼›è§£å‹ç¼©åç”¨ <em>MAT</em> å¯¼å…¥ï¼Œå¦‚æœä¸ªäººæœºå™¨çš„å†…å­˜ä¸å¤Ÿï¼Œæ— æ³•è¿›è¡Œè§£æ<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ã€‚</p>

<h5><a href="https://wiki.eclipse.org/MemoryAnalyzer/FAQ#Frequently_Asked_Questions">å†…å­˜ä¸å¤Ÿè£…è¿› Eclipse çš„è§£å†³æ–¹æ¡ˆ</a></h5>

<p>æ‰¾åˆ° <code>org.eclipse.equinox.launcher_1*.jar</code> çš„æœ¬åœ°ç›®å½•ï¼Œå‘½ä»¤è¡Œæ‰§è¡Œç”Ÿæˆç´¢å¼•è¿‡ç¨‹ï¼š</p>

<p><code>java -jar /Users/hedley/eclipse/java-neon/Eclipse.app/Contents/Eclipse/plugins/org.eclipse.equinox.launcher_1*.jar -consoleLog -application org.eclipse.mat.api.parse dump.hprof org.eclipse.mat.api:suspects org.eclipse.mat.api:overview org.eclipse.mat.api:top_components</code> ç”ŸæˆæŠ¥å‘Šï¼Œå…¶ä¸­ <code>org.eclipse.mat.api:suspects</code>ã€<code>org.eclipse.mat.api:overview</code>ã€<code>org.eclipse.mat.api:top_components</code> æ˜¯ç”Ÿæˆçš„ä¸‰ä¸ªä¸»è¦æ¨¡å—ï¼Œå¯æ ¹æ®éœ€è¦é…ç½®ã€‚å†ç”¨ <em>Eclipse</em> æ‰“å¼€æŠ¥å‘Šç›®å½•ã€‚</p>

<blockquote><p>å¦‚æœä»¥ä¸Šå‘½ä»¤è¿˜æŠ¥å†…å­˜ä¸è¶³ï¼Œå°è¯•åŠ å‚æ•° -Xmx4g -XX:-UseGCOverheadLimit</p></blockquote>


<p><a href="https://www.ibm.com/support/knowledgecenter/SS3KLZ/com.ibm.java.diagnostics.memory.analyzer.doc/queryingheapobjects.html">OQL2</a></p>

<h4><a href="http://dr-brenschede.de/bheapsampler/">BHeapSampler</a></h4>

<p><em>BHeapSampler</em> æ˜¯ä¸€æ¬¾è½»é‡çº§çš„ JVM å†…å­˜åˆ†æå·¥å…·ã€‚ä¸ï¼Œå®ƒä¸å•å•æ˜¯è½»é‡çº§ï¼Œæ˜¯ç¾½æ¯›çº§ï¼å¦‚æœç”¨ <em>MAT</em>ï¼Œé€šå¸¸éœ€è¦æŠŠè‡ƒè‚¿çš„ <em>dump.hprof</em> ä¼ åˆ°æœ¬æœºè¿›è¡Œæ“ä½œ<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>ã€‚è€Œ <em>BHeapSampler</em> æ˜¯ä¸€ä¸ªå¤§å°åªæœ‰ <em><em>26K</em></em> çš„ <em>jar</em> åŒ…ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ä¸€è¡ŒæŒ‡ä»¤å³å¯è¿›è¡Œåˆ†æã€‚å®ƒåˆ†æå¾—åˆ°çš„æ˜¯ä¸€å¼ <strong>å¤§å†…å­˜å¯¹è±¡å¼•ç”¨å›¾</strong>ï¼Œä¸èƒ½è¿›è¡Œä»»ä½•æ“ä½œä¸ç»†é¡¹æŸ¥è¯¢ç´¢å¼•ã€‚ä½†æ˜¯è¿™å¼ é‡ç‚¹é²œæ˜çš„å†…å­˜å›¾ï¼Œæœ‰æ—¶ä¼šæ¯” <em>MAT</em> æ›´å‡»ä¸­è¦å®³ã€‚å¤§å†™çš„èµã€‚</p>

<ul>
<li><code>java -Xmx40g -XX:-UseGCOverheadLimit -jar bheapsampler.jar dump.hprof</code> - å¾—åˆ° <em>memory_graph.dot</em></li>
<li>å¯ä»¥ç”¨ <a href="http://graphviz.org/Download_macos.php">Graphviz</a> æŸ¥çœ‹ <em>.dot</em> æ–‡ä»¶ï¼Œè£…å®Œä¹Ÿå¯ä»¥å°† <em>.dot</em> è½¬ä¸º <em>pdf</em> æ ¼å¼ï¼š <code>/opt/local/bin/dot -Tpdf -omemory_graph.pdf memory_graph.dot</code></li>
</ul>


<h5>Mac å®‰è£… <em>Graphviz</em></h5>

<p><img src="/images/JVM/graphviz.png"></p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/09/21/jvm-diao-shi-da-za-hui/'><a href="http://hedleyyan.github.io/blog/2016/09/21/jvm-diao-shi-da-za-hui/">http://hedleyyan.github.io/blog/2016/09/21/jvm-diao-shi-da-za-hui/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>For old generation space OutOfMemoryErrors, increase -Xms and -Xmx; For permanent generation OutOfMemoryErrors, increase -XX:PermSize and -XX:MaxPermSize<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>æˆ‘æ›¾ç»åˆ†æè¿‡çš„çº¿ä¸Šå‹åŠ›ä¸€èˆ¬æœåŠ¡å™¨çš„ dump åœ¨ 10G å·¦å³<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>Eclipse åœ¨å¯¼å…¥ dump æ–‡ä»¶åï¼Œä¼šè¿›è¡Œç´¢å¼•åˆ†æï¼Œå ç”¨å¤§é‡å†…å­˜ã€‚å†…å­˜ä¸è¶³æ—¶ä¼šæŠ¥ OutOfMemoryError<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>å¾ˆå°‘æœ‰äººåœ¨æœåŠ¡å™¨ä¸Šè£… Eclipse å§ï¼Ÿ<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/">Eclipse è½»æ¾ Debug åç¼–è¯‘æºä»£ç </a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-01-27T09:47:58+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>9:47 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><ul>
<li>å®‰è£…åç¼–è¯‘æºç æ’ä»¶ï¼š<a href="http://jd.benow.ca/">JD-Eclipse</a></li>
<li>å®‰è£…åŸºäº <em>JD-Eclipse</em> çš„ä»£ç é‡ç»„æ’ä»¶ï¼š<a href="https://gauchoacomecable.wordpress.com/2011/10/14/eclipse-debug-java-without-source-code-jd-eclipse-and-realignment/">Realignment Fragment</a>

<ul>
<li>åç¼–è¯‘æºç çš„å·¥å…·æ»¡è¡—éƒ½æ˜¯ï¼Œä½†è¿™ä¸ªè¡Œæ•°é‡ç»„å¯¹é½çš„å¼ºåŒ–æ’ä»¶æ‰æ˜¯çœŸçš„å±Œ</li>
</ul>
</li>
<li>Happy Debug!</li>
</ul>


<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/'><a href="http://hedleyyan.github.io/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/">http://hedleyyan.github.io/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2016/01/15/code-folding-plugin-4-eclipse/">Code Folding Plugin 4 Eclipse</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2016-01-15T16:51:38+08:00'><span class='date'><span class='date-month'>Jan</span> <span class='date-day'>15</span><span class='date-suffix'>th</span>, <span class='date-year'>2016</span></span> <span class='time'>4:51 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>ç”Ÿæ´»ä¸­æœ‰å¾ˆå¤šå°å·§æƒŠè‰³çš„æ•ˆç‡å·¥å…·ï¼Œå®ƒä»¬ä½¿ä¸–ç•Œæ›´ç¾å¥½ã€‚</p>

<p><em>Coffee-Bytes code folding</em> æ˜¯åŸºäº <em>eclipse</em> çš„ä¸€æ¬¾ä»£ç æŠ˜å å°æ’ä»¶ã€‚ <a href="http://hedleyyan.github.io/downloads/resource/code_folding.rar">æˆ³æˆ‘ä¸‹è½½</a></p>

<h2>å®‰è£…</h2>

<p>è§£å‹ç¼©åï¼ŒæŠŠ <code>features</code> å’Œ <code>plugins</code> ä¸­çš„æ–‡ä»¶åˆ†åˆ«æ‹·è´åˆ° <em>eclipse</em> æ ¹ç›®å½•ä¸‹çš„ç›¸åº”ä½ç½®ï¼Œå®‰è£…å®Œæ¯•ã€‚</p>

<p>åœ¨ <em>eclipse</em> é…ç½®é€‰é¡¹ä¸­ï¼Œæ›´æ¢ <em>Folding</em> æ ‡ç­¾é¡µä¸‹çš„æŠ˜å ç±»å‹é€‰é¡¹ï¼Œé‡å¯ <em>eclipse</em> ç”Ÿæ•ˆã€‚</p>

<h2>é…ç½®</h2>

<p>æ‰“å¼€ <code>General</code> æ ‡ç­¾ä¸‹æœ€åçš„ <code>User Defined Regions</code>ï¼Œåœ¨ç›¸åº”æ ‡ç­¾ä¸‹è‡ªå®šä¹‰ä½ ä¹ æƒ¯çš„ä»£ç æŠ˜å å—çš„å¼€å§‹å’Œç»“æŸæ ‡è®°ã€‚</p>

<p><img src="/images/code_folding/1.png"></p>

<p><img src="/images/code_folding/2.png"></p>

<p><img src="/images/code_folding/3.png"></p>

<ul>
<li>å»ºè®®æŠŠ <code>Advanced</code> æ ‡ç­¾ä¸‹çš„é€‰é¡¹å…¨éƒ¨å‹¾é€‰ï¼Œè¿™æ ·åœ¨æŠ˜å ä»£ç çš„æ—¶å€™ä¼šç”©ä¸‹æœ€åä¸€è¡Œï¼Œå°¤å…¶ <code>if / else if</code> ä»£ç å—çš„æŠ˜å æ•ˆæœä¼šæ›´ç²¾å‡†</li>
</ul>


<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2016/01/15/code-folding-plugin-4-eclipse/'><a href="http://hedleyyan.github.io/blog/2016/01/15/code-folding-plugin-4-eclipse/">http://hedleyyan.github.io/blog/2016/01/15/code-folding-plugin-4-eclipse/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/12/27/sed-xun-huan-chu-li/">Sed å¾ªç¯å¤„ç†</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-27T17:38:03+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>27</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:38 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><em>sed</em> æ˜¯ <em>shell</em> ç¼–ç¨‹ä¸­å¾ˆå¸¸è§çš„æµç¼–è¾‘å‘½ä»¤ï¼Œä¸»è¦ç”¨äºæ‰¹é‡æ›¿æ¢ã€‚</p>

<p><em>sed</em> çš„é»˜è®¤ç¼–è¾‘å•ä½æ˜¯ã€è¡Œã€ï¼Œå¦‚æœè¦å¤„ç†çš„ä¿¡æ¯åˆ†å¸ƒäºå¤šä¸ªè¡Œä¸­ï¼Œéœ€è¦è€ƒè™‘å¤šè¡Œå¤„ç†å‘½ä»¤ï¼š<em>Nã€Pã€D</em>ã€‚<em><a href="http://www.grymoire.com/Unix/Sed.html#uh-51">click here, nice tutorial</a></em></p>

<p>è€ƒè™‘ä»¥ä¸‹æƒ…æ™¯ï¼š</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% cat onetwo                                                                            
</span><span class='line'>one two onw two one two xxx one
</span><span class='line'>two yyy one
</span><span class='line'>two zzz one    
</span><span class='line'>two kkk two one
</span><span class='line'>twx xxx yyy one two one
</span><span class='line'>xxxxx
</span><span class='line'>xxx
</span><span class='line'>
</span><span class='line'>yyy one 
</span><span class='line'>x two one
</span><span class='line'>xx one
</span><span class='line'>
</span><span class='line'>two x
</span><span class='line'>x one
</span><span class='line'>two one
</span><span class='line'>two</span></code></pre></td></tr></table></div></figure>


<p>å¦‚æœä¸€è¡Œä»¥ <em>one</em> ç»“å°¾ï¼Œè€Œä¸”ä¸‹ä¸€è¡Œä»¥ <em>two</em> å¼€å¤´ï¼Œé‚£ä¹ˆå°±æŠŠè¿™ä¸¤ä¸ªé‚»æ¥è¡Œæ‹¼æ¥æˆä¸€è¡Œï¼Œå¹¶æŠŠ <em>one two</em> æ›¿æ¢ä¸º <em>1 2</em>ã€‚</p>

<p>åœ¨åªäº†è§£ <em>Nã€Pã€D</em> ä¹‹åï¼Œæƒ³å‡ºä¸€ä¸ªæ¯”è¾ƒæœ‰æ„æ€çš„è§£å†³æ–¹æ¡ˆï¼š</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% cat onetwo.sed
</span><span class='line'>#!/usr/bin/sed -f
</span><span class='line'>/one *$/ {
</span><span class='line'>        # è¿æ¥ä¸‹ä¸€è¡Œï¼Œ$!N è¡¨ç¤ºå¦‚æœè¯»åˆ°æœ€åä¸€è¡Œå•ç‹¬å¤„ç† 
</span><span class='line'>        $!N
</span><span class='line'>        # æ›¿æ¢ prefix + one + å›è½¦ç¬¦ + two ä¸º å›è½¦ç¬¦ + prefix + 1 2
</span><span class='line'>        s/^\(.*\)one *\ntwo/\
</span><span class='line'>\11 2/
</span><span class='line'>        /^\n/ !P
</span><span class='line'>        D
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>è¡¨è¾¾å¼ <em>s/a/b/</em> ä¸­ï¼ŒæŸ¥æ‰¾å­—ç¬¦ä¸² <em>a</em> å¦‚æœåŒ…å«å›è½¦ç¬¦ï¼Œç”¨ <code>\n</code> è¡¨ç¤ºã€‚ä½†æ˜¯å¦‚æœæ›¿æ¢å­—ç¬¦ä¸² <em>b</em> ä¸­å¦‚æœåŒ…å«å›è½¦ç¬¦ï¼Œéœ€è¦ç”¨ <code>\ + å›è½¦</code> è¡¨ç¤ºã€‚å¹¶ä¸”å›è½¦åçš„æ›¿æ¢å†…å®¹è¦é¡¶å¤´ï¼Œä¸èƒ½æ’ç‰ˆåŠ ç©ºæ ¼ã€tab<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã€‚</p>

<p>ä»¥ä¸Šè§£å†³æ–¹æ¡ˆçš„å…³é”®ç‚¹åœ¨äºæ›¿æ¢æ—¶åœ¨å¼€å¤´åˆåŠ äº†ä¸€ä¸ª<strong>æ¢è¡Œç¬¦</strong>ï¼Œå¦‚æ­¤åé¢æ‰§è¡Œ <em>D</em> åˆ™åˆ é™¤äº†æ¨¡å¼ç©ºé—´ä¸­çš„è¿™ä¸ª<strong>ç©ºè¡Œ</strong>ï¼Œç»§ç»­è¯»å…¥ä¸‹ä¸€è¡Œå¤„ç†ï¼Œä»¥æ­¤è¾¾åˆ°å¾ªç¯å¤„ç†çš„ç›®çš„ã€‚</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% ./onetwo.sed onetwo
</span><span class='line'>one two onw two one two xxx 1 2 yyy 1 2 zzz 1 2 kkk two one
</span><span class='line'>twx xxx yyy one two one
</span><span class='line'>xxxxx
</span><span class='line'>xxx
</span><span class='line'>
</span><span class='line'>yyy one 
</span><span class='line'>x two one
</span><span class='line'>xx one
</span><span class='line'>
</span><span class='line'>two x
</span><span class='line'>x 1 2 1 2</span></code></pre></td></tr></table></div></figure>


<p>åé¢äº†è§£äº† <em>t</em> å‘½ä»¤åï¼Œæ›´ç›´æ¥çš„è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>% cat onetwot.sed     
</span><span class='line'>#!/bin/bash 
</span><span class='line'>sed  '
</span><span class='line'>/one/ {
</span><span class='line'>        :again
</span><span class='line'>                $!N
</span><span class='line'>                s/one *\ntwo/1 2/
</span><span class='line'>                t again
</span><span class='line'>
</span><span class='line'>}
</span><span class='line'>' $1</span></code></pre></td></tr></table></div></figure>


<p><em>t</em> å‘½ä»¤ç›¸å½“äºä¸€ä¸ª <em>while</em>ï¼Œå½“ <em>t</em> ä¹‹å‰æœ€è¿‘çš„ä¸€ä¸ª <em>s/a/b/</em> å‘½ä»¤åŒ¹é…æˆåŠŸæ—¶ï¼Œç»§ç»­å¾ªç¯ã€‚å¾—åˆ°åŒæ ·çš„è¿è¡Œç»“æœã€‚</p>

<p>æ­¤å°å®ä¾‹åªåšè¶£å‘³è®¨è®ºï¼Œ<em>shell</em> ä¸­çš„æµå¤„ç†<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>éƒ½æ˜¯é¢å‘<em>è¡Œ</em><sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ä¸ºå•ä½çš„ï¼Œå¯¹äºå†…å®¹æœ‰ overlap çš„å¾ªç¯å¤„ç†ï¼Œæ•ˆç‡ä½ä¸”ä¸å¥½ç”¨ã€‚</p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/12/27/sed-xun-huan-chu-li/'><a href="http://hedleyyan.github.io/blog/2015/12/27/sed-xun-huan-chu-li/">http://hedleyyan.github.io/blog/2015/12/27/sed-xun-huan-chu-li/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>å–å†³äºä¸åŒçš„ sed ç‰ˆæœ¬ï¼Œä½†æ˜¯é¡¶å¤´å†™è‚¯å®šæ˜¯ ok çš„ã€‚<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>sed, awk, grep etc..<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>or å—ï¼Œæ¯”å¦‚ awk ä¸­çš„ FS=&lsquo;\n&rsquo;<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/18/prototype-pattern/">Java å¦‚ä½•å®ç° Prototype Pattern</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-18T14:53:29+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:53 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>çœ‹åˆ°  <a href="https://books.google.com.hk/books?id=FqfKFl4Bm7UC&amp;printsec=frontcover&amp;dq=software+architecture+design+patterns+in+java&amp;hl=en&amp;sa=X&amp;ved=0CB0Q6AEwAGoVChMIktPB556yxwIVhBcsCh3h_wwt#v=onepage&amp;q&amp;f=false">Software Architecture Design Patterns in Java</a> çš„ <em>CREATIONAL PATTERNS: Prototype</em> <sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ç« èŠ‚ï¼Œå¿½æ„Ÿä¸€é˜µææƒšã€‚ä¹‹å‰å†™<a href="/blog/2015/07/18/fu-ze-ren-zai-tan-callback-yu-delegation/">è´Ÿè´£ä»»å†è°ˆ Callback ä¸ Delegation</a> æ—¶æåˆ°äº† <strong>Java ä¸æ”¯æŒ Delegation</strong>ï¼Œä½†æ˜¯è¿™ç¯‡è®¾è®¡æ¨¡å¼å´å¥½åƒå†™å¦‚ä½•åœ¨ Java ä¸­å®ç° <em>Delegation</em>ã€‚æ­¤ä¸­æ¶‰åŠäº† <code>Object.clone()</code> æ–¹æ³•ã€<code>Cloneable</code> æ¥å£ï¼ŒçœŸçœŸä¸€å›¢ä¹±éº»ã€‚</p>

<h2>Prototype Pattern</h2>

<p>å…ˆçœ‹ <em>Prototype Pattern</em> çš„ <a href="https://en.wikipedia.org/wiki/Prototype_pattern">Wiki</a>ï¼Œä¸€å¼€å§‹æåˆ°çš„ä¾¿æ˜¯ <em>Not to be confused with Prototype-based programming</em>ï¼Œ<em>Delegation</em> æ­£æ˜¯ <em>Prototype-based programming</em> çš„è¯­è¨€ç‰¹æ€§<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>ã€‚æ€»ä¹‹ï¼Œ<em>Prototype Pattern</em> æ˜¯åˆ›å»ºå¯¹è±¡çš„ä¸€ç§æ–¹æ³•ï¼Œ<em>Delegation</em> æ˜¯è¯­è¨€çš„ä¸€ç§å¤©èµ‹ã€‚</p>

<h2>clone() &amp;&amp; Cloneable Interface</h2>

<p>äº†è§£ <code>clone</code> ä¹‹å‰ï¼Œçœ‹ <a href="https://books.google.com.hk/books?id=ka2VUBqHiWkC&amp;pg=PA54&amp;dq=Item+11:+OVERRIDE+CLONE+JUDICIOUSLY&amp;hl=en&amp;sa=X&amp;ved=0CB0Q6AEwAGoVChMI9vu89beyxwIVClssCh21QQYo#v=onepage&amp;q=Item%2011%3A%20OVERRIDE%20CLONE%20JUDICIOUSLY&amp;f=false">Effective Java, Item 11: Override clone judiciously</a> æ˜¯å¿…ä¿®è¯¾ï¼</p>

<p>éšä¾¿ç¿»çœ‹å‡ ä¸ª Java å®ç° <em>Prototype Pattern</em> çš„ä¾‹å­ã€<a href="http://www.blackwasp.co.uk/Prototype.aspx">æˆ³è¿™é‡Œ</a>ã€<a href="http://www.tutorialspoint.com/design_pattern/prototype_pattern.htm">æˆ³è¿™é‡Œ</a>ã€<a href="http://howtodoinjava.com/2013/01/04/prototype-design-pattern-in-java/">æˆ³è¿™é‡Œ</a>ã€ï¼Œä¹ŸåŒ…æ‹¬æœ€å¼€å§‹æåˆ°çš„ <em>CREATIONAL PATTERNS: Prototype</em>ï¼Œéƒ½æ˜¯é€šè¿‡ <code>Object</code> åŸºç±»ä¸­çš„ <code>clone()</code> æ–¹æ³•ç›´æ¥æˆ–é—´æ¥å®ç°çš„ã€‚</p>

<p><code>clone()</code> æ–¹æ³•æ˜¯åŸç”Ÿæ–¹æ³•ï¼Œå®ƒç±»ä¼¼ <code>new</code>ï¼Œä¼šç”Ÿæˆæ–°å¯¹è±¡ï¼Œä¹Ÿæ˜¯ä¸€ç§â€œæ„é€ æ–¹æ³•â€ï¼Œæ‰€ä»¥å¯¹æ„é€ æ–¹æ³•çš„ä¸€äº›çº¦æŸå¯¹å…¶åŒæ ·é€‚ç”¨<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ã€‚</p>

<p><code>clone()</code> æ–¹æ³•æ˜¯ <code>protected</code> æ–¹æ³•ï¼Œæƒ³è¦è°ƒç”¨ä¹‹è¿˜éœ€è¦ç»‘å®š <code>Cloneable</code> æ¥å£ã€‚è¿™ä¸ªå¥‡è‘©è®¾å®šå¾ˆæ¶å¿ƒï¼Œè™½è¯´<strong>çº¦å®šä¼˜äºé…ç½®</strong>ï¼Œä½†è¿™ç§çº¦å®šå®åœ¨æ˜¯å¤ªä¸ä¼˜é›…ã€‚æŒ‰ç…§åœ°çƒäººçš„ç†è§£ï¼Œä¸€ä¸ªæ¥å£åº”è¯¥æä¾›ä¸€ç§æœåŠ¡ï¼Œ<code>Cloneable</code> æ¥å£æä¾› <code>clone()</code> æ–¹æ³•å¤©ç»åœ°ä¹‰ï¼Œä½†åˆç”±äºå…¶ç‰¹æ®Šæ€§ï¼Œ<code>clone()</code> æ–¹æ³•çš„åŸç”Ÿå®ç° Java éœ€è¦è‡ªå·±æä¾›ï¼Œè€Œæ¥å£å£°æ˜çš„æ–¹æ³•åˆä¸èƒ½ç»™å‡ºä¸€ä¸ªé»˜è®¤å®ç°<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>ï¼Œç„¶åè¿™ä¸ª <code>clone()</code> æ–¹æ³•ä¾¿å†™åœ¨äº† <code>Object</code> é‡Œï¼Œ<code>Cloneable</code> æ¥å£åªæ˜¯ä½œä¸ºä¸€ä¸ªæ ‡è¯†æ¥å£ç”¨ï¼šæ‰€æœ‰å®ç°äº† <code>Cloneable</code> çš„ç±»éœ€è¦é‡å†™ <code>clone()</code> æ–¹æ³•ï¼Œé€šè¿‡ <code>super.clone()</code> æ¥è°ƒç”¨ <code>Object.clone()</code> çš„åŸç”Ÿå®ç°ï¼Œç„¶åæ ¹æ®éœ€è¦å†åšä¸€äº›é€‚å½“çš„è°ƒæ•´ã€‚</p>

<p>æ‰€è°“é€‚å½“çš„è°ƒæ•´ï¼Œæ˜¯å› ä¸º <code>Object</code> çš„ <code>clone()</code> æ–¹æ³•åªæ˜¯ <em>shallow copy</em>ï¼Œå¦‚æ­¤ <em>clone</em> å‡ºæ¥çš„å¯¹è±¡ï¼Œå…¶åŒ…å«çš„ <em>mutable</em> çš„å¼•ç”¨è¿˜æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼Œå¹¶éå‰¯æœ¬ã€‚</p>

<blockquote><p>By convention, the object returned by this method should be independent of this object (which is being cloned). To achieve this independence, it may be necessary to modify one or more fields of the object returned by super.clone before returning it. Typically, this means copying any mutable objects that comprise the internal &#8220;deep structure&#8221; of the object being cloned and replacing the references to these objects with references to the copies. If a class contains only primitive fields or references to immutable objects, then it is usually the case that no fields in the object returned by super.clone need to be modified.</p><footer><strong>Object.clone() è¯´æ˜</strong></footer></blockquote>


<p>äº†è§£äº†è¿™äº›ä¹‹åï¼Œä½ ä»¥ä¸ºå°±å¯ä»¥å¦¥å¦¥çš„ä½¿ç”¨ <code>clone()</code> äº†å—ï¼Ÿè¿˜è¦æ³¨æ„è¿™äº›é™åˆ¶</p>

<ul>
<li>All classes that implement Cloneable should override clone with a public method whose return type is the class itself.</li>
<li>If you override the clone method in a nonfinal class, you should return an object obtained by invoking super.clone. If all of a classâ€™s superclasses obey this rule, then invoking super.clone will eventually invoke Objectâ€™s clone method, creating an instance of the right class.</li>
<li>In effect, the clone method functions as another constructor; you must ensure that it does no harm to the original object and that it properly establishes invariants on the clone.</li>
<li>Like a constructor, a clone method should not invoke any nonfinal methods on the clone under construction.</li>
<li>The clone architecture is incompatible with normal use of final fields referring to mutable objects.</li>
<li>Objectâ€™s clone method is declared to throw CloneNotSupportedException, but overriding clone methods can omit this declaration. Public clone methods should omit it because methods that donâ€™t throw checked exceptions are easier to use.</li>
<li>If you decide to make a thread-safe class implement Cloneable, remember that its clone method must be properly synchronized just like any other method.</li>
<li>Given all of the problems associated with Cloneable, itâ€™s safe to say that other interfaces should not extend it, and that classes designed for inheritance (Item 17) should not implement it.</li>
</ul>


<p>é‰´äºä»¥ä¸Šç§ç§ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆä¿å®ˆçš„è¯´ï¼šççˆ±ç”Ÿå‘½ï¼Œè¿œç¦» <em>clone()</em>ã€‚</p>

<h2>Copy Constructor || Copy Factory</h2>

<p>EJ ç»™å‡ºäº†ä¸€ç§æ›¿ä»£è§£å†³æ–¹æ¡ˆï¼šcopy constructor or copy factoryã€‚å®ƒå¯¹æ¯” <code>clone()</code> ç®€ç›´å¥½å¤„å¤šå¤šï¼šä¸éœ€è¦å—å¥‡è‘©è¯­æ„çº¦æŸã€ä¸ä¼šå’Œ <code>final</code> æ ‡è¯†çš„å±æ€§å†²çªã€ä¸æŠ›å‡ºæ— æ„ä¹‰çš„å¼‚å¸¸ã€ä¸éœ€è¦ç±»å‹è½¬æ¢ã€‚</p>

<p><img src="/images/copy_constructor.png"></p>

<p><em>copy constructor</em> æ¥å—çš„å‚æ•°æ˜¯å…¶è‡ªèº«å®ç°çš„æ¥å£ç±»å‹ï¼Œå®ƒä»¬å…¶å®ç±»å±äº <em>conversion constructor</em>ã€‚æ³¨æ„ <code>HashMap</code> ä¸ <code>Collection</code> çš„æ„é€ æ–¹æ³•é‡Œï¼Œéƒ½æœ‰è¿™ç§ <em>conversion constructor</em>ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯ <em>shallow copy</em>ã€‚</p>

<h2>åºåˆ—åŒ–ä»¥åŠå…¶ä»–</h2>

<p><a href="http://stackoverflow.com/questions/23892962/is-object-deserialization-a-proper-way-to-implement-prototype-pattern-in-java">Is Object deserialization a proper way to implement Prototype pattern in Java?</a> ç»†è‡´è®¨è®ºäº†é€šè¿‡åºåˆ—åŒ–å®ç° <em>Prototype Pattern</em> çš„å¯èƒ½æ€§ã€‚ç»“è®ºæ˜¯<strong>å¯ä»¥</strong>ï¼Œä½†ä»£ä»·æ˜¯å·¨å¤§çš„ï¼Œè¿˜ä¸å¦‚ <code>clone</code> å‘¢ï¼å…¶å® XMLã€JSON éƒ½å¯ä»¥ä½œä¸ºå®ç°åŸå‹æ¨¡å¼çš„æ‰‹æ®µï¼Œåªè¦èƒ½å¾—åˆ°ä¸€ä¸ªå¯¹è±¡çš„å‰¯æœ¬å°±è¡Œäº†å‘—ã€‚é—®é¢˜ä¸­çš„æ¯ä¸€ä¸ªå›ç­”æ¯ä¸€ä¸ªè¯„è®ºéƒ½å€¼å¾—ç»†ç»†å“å‘³ã€‚</p>

<p><img src="/images/kluge.png"></p>

<p><font size="8px"><strong>kluge</strong></font> [è‹±][k&#8217;lu:dÊ’] [ç¾][k&#8217;lu:dÊ’]  &nbsp;&nbsp; n.ç”±ä¸é…å¥—çš„å…ƒä»¶æ‹¼å‡‘è€Œæˆçš„è®¡ç®—æœºï¼Œå¼‚æœºç§ç³»ç»Ÿ</p>

<p><a href="http://stackoverflow.com/questions/665860/deep-clone-utility-recomendation/">Deep clone utility recomendation.</a> ç»™å‡ºäº†å®ç° <em>deep clone</em> çš„ä¸€ä¸ªå¼€æºç±»åº“ <em><a href="https://github.com/kostaskougios/cloning">The cloning library</a></em>ï¼Œæ­¤è´´å­çš„å›ç­”è¯„è®ºåŒæ ·ç²¾å½©ã€‚ç•¥çœ‹äº†ä¸€çœ¼ <em>The cloning library</em> çš„ç®€ä»‹å’Œè¯„ä»·ï¼ŒæœŸå¾…åº¦è¾ƒé«˜ï¼Œè²Œä¼¼æ˜¯é€šè¿‡åå°„å®ç°çš„ï¼Œç­‰æœ‰ç©ºç ”ç©¶ä¸€ä¸‹ä»£ç å†è¡¨ã€‚</p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/08/18/prototype-pattern/'><a href="http://hedleyyan.github.io/blog/2015/08/18/prototype-pattern/">http://hedleyyan.github.io/blog/2015/08/18/prototype-pattern/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>Page 95.<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>language feature<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>ä¸»è¦å°±æ˜¯è¿™ä¸€æ¡ï¼šNever call overridable methods from constructors, either directly or indirectly.<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>JKD8 å¯ä»¥åšåˆ°ï¼Œå’‹ä¸æ—©å‡ºè¿™ä¸ªç‰¹æ€§å˜<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/">MySQL5.5 ä»¥ä¸‹ç‰ˆæœ¬é€šè¿‡ Java è½¬ä¹‰å®ç° Emoji å­˜å–</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-08-05T22:41:19+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>5</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>10:41 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>æˆ‘ä¸è¾“å‡ºå¥½æ–‡ï¼Œæˆ‘åªæ˜¯å¥½æ–‡çš„æ¬è¿å·¥ã€‚<a href="http://cenalulu.github.io/linux/character-encoding">ååˆ†é’Ÿææ¸…å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç </a>å¸¦ä½ èµ°è¿› <em>Unicode</em> å’Œ <em>UTF-8</em> çš„å‰ä¸–ä»Šç”Ÿã€‚æ€»è€Œè¨€ä¹‹ï¼Œ<em>Unicode</em> æ˜¯æ ‡å‡†ï¼Œ<em>UTF-8</em> æ˜¯å®ç°ã€‚</p>

<h2>MySQL è¿‡æ‹› <em>Emoji</em></h2>

<p>é€šå¸¸ MySQL çš„é»˜è®¤å­—ç¬¦é›†éƒ½ä¼šé…ç½®ä¸º <em>UTF-8</em>ï¼Œåªæ”¯æŒå•å­—ç¬¦ä¸è¶…è¿‡ 3 bytes çš„å­˜å‚¨<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã€‚å¸¸è§çš„ <em><a href="https://en.wikipedia.org/wiki/Emoji">Emoji</a></em> çš„ <em>Unicode</em> ç¼–ç å€¼ <em>code point</em> ä½äº <code>\u1F601 -- \u1F64F</code> åŒºé—´ï¼Œä»¥ <code>\u1F300</code> ã€ğŸŒ€ã€ä¸¾ä¾‹ï¼Œå®ƒçš„äºŒè¿›åˆ¶æœ‰ 17 ä½ï¼Œæ— æ³•ç”¨ä¸‰å­—èŠ‚çš„ <em>UTF-8</em> ç¼–ç è¡¨ç¤º<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>ã€‚å¦‚æœé€šè¿‡ JDBC å°†æ­¤å­—ç¬¦å°è¯•æ’å…¥ MySQL è®°å½•ä¸­ï¼Œä¼šå¾—åˆ°ä»¥ä¸‹å¼‚å¸¸</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>java.lang.RuntimeException: java.sql.SQLException: Incorrect string value: '\xF0\x9F\x8C\x80' for column 'message' at row 1 </span></code></pre></td></tr></table></div></figure>


<h2>Java è¿‡æ‹› <em>Emoji</em></h2>

<p>Java å­˜å‚¨å­—ç¬¦çš„å•å…ƒæ˜¯ <code>char</code>ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œ16 ä½çš„ <code>char</code> å¦‚ä½• handle 17 ä½çš„ <em>Unicode</em> å‘¢ï¼Ÿ</p>

<p><img src="/images/doughnut.png"></p>

<p>å–œé—»ä¹è§ï¼ŒJava çš„å•ä¸ª <code>char</code> ç¡®å®æ— æ³• handle ğŸŒ€ã€‚é‚£ä¹ˆ âš¡ ä¸ºä»€ä¹ˆå¯ä»¥é€šè¿‡ç¼–è¯‘ï¼Ÿç›¸ä¿¡èªæ˜å¦‚ä½ ï¼Œä¸€å®šå¯ä»¥æŸ¥åˆ° âš¡ çš„ <em>Unicode</em> æ˜¯ <code>\u26A1</code>ï¼ŒTada ~~ æ‰€ä»¥ âš¡ æ’å…¥æ•°æ®åº“ä¸­ä¹Ÿæ˜¯å¦¥å¦¥çš„ã€‚</p>

<p>é€Ÿå…¥ <a href="http://www.czyborra.com/utf/#Java">Java&rsquo;s Unicode Notation</a> ç§‘æ™®ä¸€ä¸‹ Java å¯¹ <em>Unicode</em> çš„æ”¯æŒå®ç°ï¼Œé…åˆ<a href="http://chenbochiuan.vip.blog.163.com/blog/static/172332969201072784730795/">é€šä¿—æ˜“æ‡‚ç‰ˆ</a>æ›´èµ<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ã€‚åŸæ¥ Java å­˜å‚¨å•ä¸ªå­—ç¬¦çš„æœ€å°å•å…ƒå¹¶ä¸ä¸€å®šæ˜¯å•ä¸ª <code>char</code>ï¼Œè€Œæ˜¯æ ¹æ® <em>code point</em> çš„èŒƒå›´ç¡®å®šã€‚å¦‚æœå­—ç¬¦ <code>c</code> çš„ <em>code point</em> äºŒè¿›åˆ¶è¡¨ç¤ºä¸è¶…è¿‡ 16 ä½é‚£ä¹ˆå•ä¸ª <code>char</code> å¯ç›´æ¥è¡¨ç¤º<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>ï¼›å¦åˆ™è¦è¿›è¡Œä»¥ä¸‹å¤„ç†ï¼Œä»¥ ğŸŒ€ ä¸¾ä¾‹</p>

<ul>
<li>æŠŠ <code>\u1F300</code> çš„äºŒè¿›åˆ¶è¡¨ç¤º <code>0001 11110011 00000000</code>ï¼Œå…¶é«˜ 10 ä½ä¸ä½ 10 ä½æ‹†å¼€å¤‡ç”¨</li>
<li>é«˜ä½åç§»é‡ W1 : <code>0xD7C0</code> ä¸ä½ä½åç§»é‡ W2 : <code>0xDC00</code> åˆ†åˆ«ä¸å…¶é«˜ä½ 10 ä½ç›¸åŠ å¤„ç†ï¼Œå¾—åˆ° <code>\uD83C</code> ä¸ <code>\uDF00</code><sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup></li>
<li>ä¸¤ä¸ªå­—ç¬¦æ‹¼æ¥ <code>\uD83C\uDF00</code> å¾—åˆ° ğŸŒ€</li>
</ul>


<figure class='code'><figcaption><span> (EmojiCharacter.java)</span> <a href='/downloads/code/EmojiCharacter.java'>download</a></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">unicode</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmojiCharacter</span> <span class="o">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// high offset</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">W1</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&quot;D7C0&quot;</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="c1">// low offset</span>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">W2</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&quot;DC00&quot;</span><span class="o">,</span><span class="mi">16</span><span class="o">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>        <span class="c1">// ğŸŒ€çš„äºŒè¿›åˆ¶å­—ç¬¦ä¸²è¡¨ç¤º</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">doughnutBinary</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toBinaryString</span><span class="o">(</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="s">&quot;1F300&quot;</span><span class="o">,</span><span class="mi">16</span><span class="o">));</span>
</span><span class='line'>        <span class="c1">// æ‹†æˆé«˜ä½ 10 ä½è¡¨ç¤º</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">highSetsBinary</span> <span class="o">=</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">10</span><span class="o">);</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">lowSetsBinary</span> <span class="o">=</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">doughnutBinary</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">-</span> <span class="mi">10</span><span class="o">,</span> <span class="n">doughnutBinary</span><span class="o">.</span><span class="na">length</span><span class="o">());</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highSetsBinary</span><span class="o">);</span>     <span class="c1">//    1111100</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lowSetsBinary</span><span class="o">);</span>      <span class="c1">//    1100000000</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// åˆ†åˆ«ä¸åç§»é‡ç›¸åŠ ï¼Œå¾—åˆ°ä¸¤ä¸ªç¼–ç å€¼</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">highSetsHexFixed</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="n">W1</span> <span class="o">+</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">highSetsBinary</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span>
</span><span class='line'>        <span class="n">String</span> <span class="n">lowSetsHexFixed</span> <span class="o">=</span> <span class="n">Integer</span><span class="o">.</span><span class="na">toHexString</span><span class="o">(</span><span class="n">W2</span> <span class="o">+</span> <span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lowSetsBinary</span><span class="o">,</span> <span class="mi">2</span><span class="o">));</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highSetsHexFixed</span><span class="o">);</span>   <span class="c1">//    d83c</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lowSetsHexFixed</span><span class="o">);</span>    <span class="c1">//    df00</span>
</span><span class='line'>
</span><span class='line'>        <span class="c1">// æ‹¼æ¥è¿™ä¸¤ä¸ªç¼–ç å€¼ï¼Œè¿˜åŸå­—ç¬¦è¡¨ç¤º</span>
</span><span class='line'>        <span class="kt">char</span> <span class="n">highChar</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">highSetsHexFixed</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
</span><span class='line'>        <span class="kt">char</span> <span class="n">lowChar</span> <span class="o">=</span> <span class="o">(</span><span class="kt">char</span><span class="o">)</span><span class="n">Integer</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">lowSetsHexFixed</span><span class="o">,</span> <span class="mi">16</span><span class="o">).</span><span class="na">intValue</span><span class="o">();</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highChar</span><span class="o">);</span>           <span class="c1">//    ?     </span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lowChar</span><span class="o">);</span>            <span class="c1">//    ?</span>
</span><span class='line'>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">highChar</span> <span class="o">+</span> <span class="s">&quot;&quot;</span> <span class="o">+</span> <span class="n">lowChar</span><span class="o">);</span>    <span class="c1">//    ğŸŒ€</span>
</span><span class='line'>    <span class="o">}</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h2>åˆä½“</h2>

<p>Client å‘é€ <em>Emoji</em> åˆ°åå°ï¼ŒJava å´æ— æ³•é€šè¿‡ JDBC å°†å…¶å­˜å‚¨åˆ° MySQLã€‚å¦‚æœæˆ‘ä»¬éµå¾ªæŸä¸ªç‰¹å®šçš„è½¬æ¢è§„åˆ™ï¼Œå­˜å‚¨å‰è½¬ä¹‰ä¸€æ¬¡ï¼Œè¯»å–æ—¶å†é€†è½¬ä¹‰ä¸€æ¬¡ï¼Œé‚£ä¸å°±å¦¥å¦¥å¦¥çš„äº†ã€‚ä½ å½“ç„¶å¯ä»¥è‡ªå·±å†™ï¼Œä½†æ˜¯æ‡’é€¼å¦‚æˆ‘ï¼Œæ›´å€¾å‘äºæ‰¾<a href="https://github.com/vdurmont/emoji-java/">ç°è´§</a>ã€‚</p>

<h2>å¼•ç”¨</h2>

<ul>
<li><a href="http://cenalulu.github.io/linux/character-encoding">ååˆ†é’Ÿææ¸…å­—ç¬¦é›†å’Œå­—ç¬¦ç¼–ç </a></li>
<li><a href="http://www.czyborra.com/utf/#Java">Java&rsquo;s Unicode Notation</a></li>
<li><a href="http://stackoverflow.com/questions/2220366/get-unicode-value-of-a-character">Get unicode value of a character</a></li>
<li><a href="http://stackoverflow.com/questions/6617491/how-to-convert-a-string-representation-of-unicode-hex-0x20000-to-the-int-code">Get character of a unicode value</a></li>
<li><a href="http://code.iamcal.com/php/emoji/">Full Emoji Catalog</a></li>
<li><a href="https://github.com/vdurmont/emoji-java/">emoji-java</a></li>
</ul>


<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/'><a href="http://hedleyyan.github.io/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/">http://hedleyyan.github.io/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>MySQL5.5 ç‰ˆæœ¬ä»¥åæœ‰å¯¹ <em>4 bytes</em> å•å­—ç¬¦çš„åŸç”Ÿæ”¯æŒï¼Œå­—ç¬¦é›†é…ç½®ä¸º <em>utf8mb4</em><a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>è¯·çœ‹ååˆ†é’Ÿç³»åˆ—çš„å®ç°ç»†èŠ‚ï¼Œä¸‰å­—èŠ‚çš„ <em>UTF-8</em> ç¼–ç ä¸Šé™æ˜¯ 16 ä½ã€4 + 6 + 6ã€ï¼Œ<code>11111 001100 000000</code> å¯¹åº”çš„ <em>UTF-8</em> ç¼–ç ä¸º <code>11110000 10011111 10001100 10000000</code>ï¼Œå³ <strong>\xF0</strong>&hellip;ï¼ŒMySQL ç»å¸¸ä¼šå†’å‡ºè¿™ç§å¼‚å¸¸<a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>å‹˜è¯¯ï¼Œé€šä¿—ç‰ˆä¸­æ‰€è¯´çš„ W1 : <code>0xD800</code> ä¸å¯¹ï¼Œåº”æ˜¯ <code>0xD7C0</code>ï¼Œå·²åœ¨è¯„è®ºä¸­åæ˜ ç»™åŸä½œè€…<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>æ¯”å¦‚ã€âš¡ã€<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
<li id="fn:5">
<p><em>Unicode</em> é¢„ç•™äº†æ›¿ä»£åŒºåŸŸ <code>\uD800 -- \uDFFF</code> ä½œä¸ºè¾…åŠ©ï¼Œæ­¤åŒºé—´çš„å•ä¸ªå­—ç¬¦æ²¡æœ‰å®é™…è¡¨ç¤ºæ„ä¹‰<a href="#fnref:5" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/">bigfoot.js æ³¨è„šä¹‹ Octopress ç¯‡</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-31T09:41:35+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>31</span><span class='date-suffix'>st</span>, <span class='date-year'>2015</span></span> <span class='time'>9:41 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>å¯¹äºä¸€ä¸ªä¸æ‡‚å‰ç«¯æŠ€æœ¯çš„äººï¼Œèƒ½å®ç° bigfoot.js åŠ¨æ€æ³¨è„šå®åœ¨æ˜¯å¤ªåˆºæ¿€äº†<sup id="fnref:1"><a href="#fn:1" rel="footnote">1</a></sup>ã€‚å…¶å®<a href="http://www.bigfootjs.com/">å®˜ç½‘</a>ä¸Šè¯´çš„å·²ç»å¤Ÿå¤šï¼Œä½†å‰ç«¯ç™½ç—´å¦‚æˆ‘ï¼Œè¿˜æ˜¯ç»•äº†å¥½å¤šå¼¯å­ï¼Œæ‰æ€¥<sup id="fnref:2"><a href="#fn:2" rel="footnote">2</a></sup>ã€‚</p>

<h2>ä¸‹è½½</h2>

<p>ä¸‹è½½ <a href="http://www.bigfootjs.com/download/bigfoot.zip">bigfoot.js æºç </a>ï¼Œè§£å‹ç¼©åå…¶ä¸­çš„ <code>bigfoot.js</code> å’Œ <code>bigfoot-default.scss</code> æœ‰ç”¨ï¼Œå…¶ä»–å¯åˆ ã€‚</p>

<p>è¿˜éœ€è¦ <code>jquery</code> æ¨¡å—æ”¯æŒï¼Œæˆ‘ç”¨çš„æ˜¯ <code>jquery-1.9.1.min.js</code>ã€‚ä½ å¯ä»¥é€šè¿‡ <code>command</code> + <code>alt</code> + <code>i</code> ç»„åˆé”®æ‰“å¼€å¼€å‘äººå‘˜å·¥å…·<sup id="fnref:3"><a href="#fn:3" rel="footnote">3</a></sup>ï¼Œé€šè¿‡ <code>Source</code> â–¶ <code>javascripts</code> â–¶ï¸ <code>jquery-1.9.1.min.js</code> â–¶ï¸ å³é”® â–¶ï¸ <code>Save</code> æ¥è·å–<sup id="fnref:4"><a href="#fn:4" rel="footnote">4</a></sup>ã€‚</p>

<p><img src="/images/bigfoot/findJS.png" width="750" height="500"></p>

<h2>åŠ è½½</h2>

<p><code>bigfoot.js</code> æ‹–åˆ° <code>source/javascripts</code> æ–‡ä»¶å¤¹ï¼Œç„¶åç¼–è¾‘ <code>source/_includes/custom/head.html</code>ã€‚æ·»åŠ ä»¥ä¸‹ä»£ç </p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/javascripts/jquery-1.9.1.min.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;/javascripts/bigfoot.js&quot;</span> <span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">bigfoot</span><span class="p">();</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>bigfoot-default.scss</code> æ‹–åˆ° <code>sass/custom</code>ï¼Œåœ¨ <code>sass/custom/_styles.scss</code> ä¸­æ³¨å†Œã€‚ä¸€è¡Œä»£ç </p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="k">@import</span> <span class="s2">&quot;bigfoot-default.scss&quot;</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<h2>footnotes</h2>

<p>ä¿è¯ä½ çš„ <em>octopress</em> æ³¨è„šæ’ä»¶å·²æ³¨å†Œï¼Œ<code>_config.yml</code> é»˜è®¤æ˜¯æ³¨å†Œçš„ï¼Œ<em>kramdown</em> ä¹Ÿå¯ä»¥</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">markdown</span><span class="o">:</span> <span class="n">rdiscount</span>
</span><span class='line'><span class="n">rdiscount</span><span class="o">:</span>
</span><span class='line'>  <span class="n">extensions</span><span class="o">:</span>
</span><span class='line'>    <span class="o">-</span> <span class="n">footnotes</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶åè¯­æ³•æ˜¯è¿™æ ·</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">å¯¹äºä¸€ä¸ªä¸æ‡‚å‰ç«¯æŠ€æœ¯çš„äººï¼Œèƒ½å®ç°</span><span class="err"> </span><span class="na">bigfoot.js</span><span class="err"> </span><span class="na">åŠ¨æ€æ³¨è„šå®åœ¨æ˜¯å¤ªåˆºæ¿€äº†</span><span class="err">[</span><span class="na">^1]ã€‚</span>
</span><span class='line'><span class="na">......</span>
</span><span class='line'>
</span><span class='line'><span class="err">[</span><span class="na">^1]</span><span class="o">:</span> <span class="err">æ•ˆæœèµç‚¸</span>   
</span></code></pre></td></tr></table></div></figure>


<h2>å¯èƒ½çš„é—®é¢˜</h2>

<h3>ä»€ä¹ˆéƒ½åšäº†ä½†æ²¡åµç”¨</h3>

<p>åˆ°è¿™é‡Œå¦‚æœæ²¡æœ‰æ„å¤–åº”è¯¥å°±æ˜¯å¦¥å¦¥çš„äº†ï¼Œä¸å¹¸çš„æ˜¯æˆ‘æ­£æ˜¯æ„å¤–åˆ¶é€ æœºã€‚æŠ˜è…¾äº†åŠå¤©å‘ç°æ²¡æœ‰åµç”¨ï¼Œè¿˜æ˜¯é»˜è®¤çš„ <em>octopress footnotes</em> çš„æ•ˆæœï¼Œæ‰“å¼€æ§åˆ¶å°å‘ç°æœ‰ä¸€è¡Œè¯¡å¼‚çš„é”™è¯¯è¾“å‡º</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='scss'><span class='line'><span class="na">Uncaught</span><span class="err"> </span><span class="na">TypeError</span><span class="o">:</span> <span class="err">$</span><span class="o">.</span><span class="n">bigfoot</span> <span class="n">is</span> <span class="ow">not</span> <span class="n">a</span> <span class="n">function</span>
</span></code></pre></td></tr></table></div></figure>


<p><img src="/images/bigfoot/bigfoot_exception.png" width="750" height="500"></p>

<p>è¿™æ˜¯é—¹å•¥å˜ï¼Œæ˜æ˜å°±æ˜¯ä»å®˜ç½‘ copy ä¸‹æ¥çš„å•Šã€‚æ‰¾äº†ä¸¤ä¸ªä½¿ç”¨äº† bigfoot çš„ç½‘é¡µ<sup id="fnref:5"><a href="#fn:5" rel="footnote">5</a></sup>çœ‹å…¶æºä»£ç ï¼Œæ ¹æœ¬å°±æ˜¯ä¸€æ ·çš„å˜›ä¸ºæ¯›æˆ‘è¿™æŠ¥é”™ï¼Ÿ</p>

<p>å¼€å§‹ä»¥ä¸ºæ˜¯å’Œé¡µè„šè‡ªåŠ¨ç”ŸæˆåŸæ–‡é“¾æ¥é‚£æœ‰å†²çªï¼Œå¸äº†è¿˜æ˜¯ä¸€æ ·æŠ¥é”™ã€‚å‡ ç•ªæŠ˜è…¾ï¼Œå‘ç°äº†ç ´è§£å¤§æ³•ï¼š<strong>æŠŠ bigfoot.js çš„æ³¨å†Œå†™åœ¨ head.html çš„å¼€å¤´</strong>ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·æˆ‘ä¸çŸ¥é“ï¼Œå¦‚æœå¥½å¿ƒçš„ä½ çŸ¥é“å¯èƒ½çš„åŸå› å°±å·å·å‘Šè¯‰æˆ‘å§ï¼</p>

<p>ç§»é­‚å¤§æ³•ä»¥åä¸æŠ¥é”™äº†ï¼Œæ˜¾ç¤ºä¹Ÿå¦¥ï¼Œåªæ˜¯åœ¨é¡µå°¾è¿˜æ˜¯æœ‰å†—ä½™çš„æ³¨è„šä¿¡æ¯ã€‚å‚ç…§ <a href="http://www.bigfootjs.com/#options">options</a> ç»™æˆ‘ä»¬çš„ bigfoot åŠ ä¸€äº›ä¿®é¥°</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">&quot;text/javascript&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nx">$</span><span class="p">.</span><span class="nx">bigfoot</span><span class="p">({</span>
</span><span class='line'>    <span class="nx">actionOriginalFN</span><span class="o">:</span> <span class="s2">&quot;delete&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">activateOnHover</span><span class="o">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">deleteOnUnhover</span><span class="o">:</span> <span class="s2">&quot;true&quot;</span><span class="p">,</span>
</span><span class='line'>    <span class="nx">hoverDelay</span><span class="o">:</span> <span class="s2">&quot;500&quot;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="nt">&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>é¦–é¡µä¸æ˜¾ç¤ºæ•ˆæœ</h3>

<p>å¦‚æœ <em>Post</em> é‡Œç”¨äº† <code>&lt;!--more--&gt;</code> åˆ†é¡µï¼Œé‚£ä¹ˆæ˜¾ç¤ºåœ¨é¦–é¡µçš„æ³¨è„šæ˜¯æ²¡æœ‰æ•ˆæœçš„</p>

<p><img src="/images/bigfoot/compare_1.png" width="500" height="250" title="é¦–é¡µ" ></p>

<p><font size="24px" color="red"><em>VS</em></font></p>

<p><img src="/images/bigfoot/compare_2.png" width="500" height="250" title="Post" ></p>

<p>è¿™ä¸ªæ²¡æƒ³åˆ°ç®€å•çš„è§£å†³åŠæ³•<sup id="fnref:6"><a href="#fn:6" rel="footnote">6</a></sup>ï¼Œè¦ä¹ˆåˆ†é¡µå‰éƒ¨åˆ†ä¸åŒ…æ‹¬æ³¨è„šï¼Œè¦ä¹ˆä¸åˆ†é¡µã€‚</p>

<p>å¤§åŠŸå‘Šæˆï¼Œæ’’èŠ± ğŸŒºğŸŒº</p>

<p><br/><br/><p class='post-footer'>
            original link:
            <a href='http://hedleyyan.github.io/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/'><a href="http://hedleyyan.github.io/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/">http://hedleyyan.github.io/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/</a></a><br/>
            written by <a href='http://hedleyyan.github.io'>hedley</a>
            &nbsp;posted at <a href='http://hedleyyan.github.io'><a href="http://hedleyyan.github.io">http://hedleyyan.github.io</a></a>
            </p></p>
<div class="footnotes">
<hr/>
<ol>
<li id="fn:1">
<p>æ•ˆæœèµç‚¸<a href="#fnref:1" rev="footnote">&#8617;</a></p></li>
<li id="fn:2">
<p>ä½†èƒ½å®ç°æ‰æ˜¯æœ€ç‰›é€¼çš„    <a href="#fnref:2" rev="footnote">&#8617;</a></p></li>
<li id="fn:3">
<p>For MAC, Windows å¹³å°çš„å¿«æ·é”®æ˜¯ F12<a href="#fnref:3" rev="footnote">&#8617;</a></p></li>
<li id="fn:4">
<p>æˆ‘æ˜¯å‰ç«¯å°ç™½ï¼Œæˆ‘æœŸå¾…ä½ ä¹Ÿæ˜¯ï¼Œä¸è®¸ç¬‘<a href="#fnref:4" rev="footnote">&#8617;</a></p></li>
<li id="fn:5">
<p>http://blog.honekamp.net/blog/2013/12/23/bigfoot-on-the-main-page/<a href="#fnref:5" rev="footnote">&#8617;</a></p></li>
<li id="fn:6">
<p>80/20, leave it alone&hellip;<a href="#fnref:6" rev="footnote">&#8617;</a></p></li>
</ol>
</div>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/18/fu-ze-ren-zai-tan-callback-yu-delegation/">è´Ÿè´£ä»»å†è°ˆ Callback ä¸ Delegation</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-18T15:03:11+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>18</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>3:03 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>å¼•å‡º</h1>

<p>è¯æ¥ä¸Šå›<a href="/blog/2015/07/10/zhuang-shi-zhe-mo-shi-decorate-pattern-yu-hui-diao-ji-zhi-callback-framework/">ä¸è´Ÿè´£çè¯´è¯´ Patterns ä¸ Frameworks</a>ï¼Œè¿˜è°ˆå¼•å‡ºé—®é¢˜ï¼š<em>Wrapper classes are not suited for use in callback frameworks</em>ã€‚è™½ç„¶æœ€åç»™å‡ºäº†ä¸€ä¸ªå¯ä»¥éªŒè¯çš„ <em>Demo Code</em>ï¼Œä½†æ˜¯ä¸ªä¸­ç¼˜ç”±ä»å½±å½±ç»°ç»°ï¼ŒçœŸç›¸ä»¿ä½›éš”ç€ä¸€å±‚è–„çº±åœ¨å‘æˆ‘æ‹›æ‰‹ã€‚å¿ƒæ€¥éš¾è€ï¼Œé‚ä»å¼•å‡º <em>SELF problem</em> çš„è®ºæ–‡å‡ºå‘ï¼Œé¡ºè—¤æ‘¸ç“œæŒ‰å›¾ç´¢éª¥ï¼Œä¹Ÿè®¸æ˜¯æˆ‘çš„çœŸå¿ƒæ‰“åŠ¨äº†ä¸Šå¤©ï¼Œä¹Ÿè®¸æ˜¯æˆ‘å¤ªå¸…ï¼Œå¹¸å¾— <a href="http://blog.csdn.net/yqj2065">yqj2065</a> è€å¸ˆæŒ‡ç‚¹ï¼Œæ‰æŠŠçœŸç›¸æŠ±äº†ä¸ªæ»¡æ€€ã€‚</p>

<p>å¹¸ç¦æ¥çš„å¤ªå¿«ï¼Œè™šå¹»åˆä¸çœŸå®ï¼Œä¹Ÿè®¸æˆ‘çœ‹åˆ°çš„åªæ˜¯èƒŒå½±ï¼Œåˆæˆ–è®¸æˆ‘çœ‹åˆ°çš„æ˜¯åºå±±çœŸé¢ï¼Œæ”¾ç©ºæ€ç»ªï¼Œå®¹æˆ‘ä¸€ç‚¹ç‚¹å›å¿†ã€‚ä¸çŸ¥é“å¾…æˆ‘ä»æ±‚çŸ¥è·¯ä¸Šèµ°çš„æ›´è¿œï¼Œå›å¤´å†çœ‹ä»Šå¤©çš„â€œè´Ÿè´£ä»»â€æ˜¯ä¸æ˜¯å¤Ÿç‚«é…·å‘¢ã€‚</p>

<p>å…ˆç”©å¤§æ‹›ä¸Šç»“è®º</p>

<ul>
<li>Java ä¸æ”¯æŒ <em>delegation</em></li>
<li>C# çš„ <em>delegate</em> ä¸æ˜¯çœŸæ­£çš„ <em>delegate</em></li>
<li><a name="æƒ³æ³•"><em>delegation</em> ï¼šæˆ‘åªéœ€è¦ä½ çš„åŸå‹æ–¹æ³•ï¼Œä½†æˆ‘ä¸è¦ä¾èµ–äºä½  </a></li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/07/18/fu-ze-ren-zai-tan-callback-yu-delegation/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2015/07/10/zhuang-shi-zhe-mo-shi-decorate-pattern-yu-hui-diao-ji-zhi-callback-framework/">ä¸è´Ÿè´£çè¯´è¯´ Patterns ä¸ Frameworks</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-07-10T17:11:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>5:11 pm</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>å¼•å‡º</h1>

<p><a href="https://books.google.com.hk/books?id=ka2VUBqHiWkC&amp;pg=PA85&amp;dq=The+disadvantage+of+wrapper+classes&amp;hl=en&amp;sa=X&amp;ved=0CB0Q6AEwAGoVChMI5L-T5PnPxgIVCQuOCh1joQq6#v=onepage&amp;q=The%20disadvantage%20of%20wrapper%20classes&amp;f=false">Effective Java, Item 16</a> ä¸­è¯´ <em>Wrapper classes are not suited for use in callback frameworks</em>ï¼Œæƒ³ä¸æ˜ç™½ï¼Œä¸€é¡¿ Google ä¾æ—§çœ‹ä¸ªä¼¼æ‡‚éæ‡‚ã€‚æˆ‘æƒ³æŠŠè¿™äº›å‡Œä¹±çš„çº¿ç´¢éƒ½æ•´ç†å‡ºæ¥ï¼ŒæŠ½æŠ½å‰ªå‰ªæ’åˆ—ç»„åˆä¸€ä¸‹ï¼Œä¹Ÿè®¸å°±çœ‹çš„é€å½»ç‚¹äº†å‘¢ã€‚</p>

<p>å…³äº <em>Wrapper class</em> çš„å¼•å‡ºé—®é¢˜ï¼Œä¸ªäººè®¤ä¸ºæ¯”è¾ƒ<a href="http://programmers.stackexchange.com/questions/117628/why-are-wrapper-classes-not-suited-for-use-in-callback-frameworks">ç‚«é…·çš„è§£ç­”</a>ã€‚</p>

<blockquote><p>Because a wrapped object doesn&#8217;t know of its wrapper, it passes a reference to itself(this) and callbacks elude the wrapper. This is known as the SELF problem [Lieberman86]. This leads to subtle bugs, like the wrapper missing the event. Or the wrapper and wrapped object both registering for the same events - leading to duplicate processing and potential concurrency issues as well. If you don&#8217;t know (don&#8217;t have the source code) where callbacks are registered, it may be impossible to work around this problem.</p></blockquote>


<h1>Panttern? Framework?</h1>

<p>å¼•å‡ºä¸­çš„ <em>Wrapper class</em> æ˜¯ <em>Decorator pattern</em> çš„å¼•å‡ºæ¦‚å¿µï¼Œ<em>callback frameworks</em> æ˜¯ä¸€ç§ <em>framework</em>ã€‚ä»ç¿»è¯‘ä¸Šçœ‹ï¼Œ<em>pattern</em> è¯‘ä¸º <strong>æ¨¡å¼</strong>ï¼Œ<em>framework</em> è¯‘ä¸º <strong>æ¡†æ¶</strong>ã€‚é‚£ä¹ˆè¿™ä¸ª <em>pattern</em> ä¸ <em>framework</em> æœ‰æ¯›çš„åŒºåˆ«å‘¢ï¼Ÿ</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2015/07/10/zhuang-shi-zhe-mo-shi-decorate-pattern-yu-hui-diao-ji-zhi-callback-framework/">Read on &rarr;</a>
    </footer>
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/posts/2">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1><i class="fa fa-tags"></i>&nbsp;Tags</h1>
  <ul class="tag-cloud">
    <a style="font-size: 105%" href="/tags/framework/">Framework</a>
<a style="font-size: 180%" href="/tags/java/">Java</a>
<a style="font-size: 70%" href="/tags/mysql/">MySQL</a>
<a style="font-size: 125%" href="/tags/pattern/">Pattern</a>
<a style="font-size: 105%" href="/tags/shell/">shell</a>
<a style="font-size: 151%" href="/tags/tips/">tips</a>
<a style="font-size: 125%" href="/tags/gui-yue/">è§„çº¦</a>
<a style="font-size: 151%" href="/tags/pei-zhi/">é…ç½®</a>

  </ul>
</section>
<section>
  <h1><i class="fa fa-list"></i>&nbsp;Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/10/10/os-x-ming-ling-xing-she-ding-zhi-ding-ip/">OS X é€šè¿‡å‘½ä»¤è¡Œè®¾ç½®ç‰¹å®š IP</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/09/21/jvm-diao-shi-da-za-hui/">HotSpot JVM è°ƒè¯•å¤§æ‚çƒ©</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/27/ru-he-yong-jd-eclipse-qing-song-diao-shi-fan-bian-yi-yuan-dai-ma/">Eclipse è½»æ¾ Debug åç¼–è¯‘æºä»£ç </a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/15/code-folding-plugin-4-eclipse/">Code Folding Plugin 4 Eclipse</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/27/sed-xun-huan-chu-li/">Sed å¾ªç¯å¤„ç†</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/18/prototype-pattern/">Java å¦‚ä½•å®ç° Prototype Pattern</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/05/mysql5-dot-5-yi-xia-ban-ben-tong-guo-java-zhuan-yi-shi-xian-emoji-cun-qu/">MySQL5.5 ä»¥ä¸‹ç‰ˆæœ¬é€šè¿‡ Java è½¬ä¹‰å®ç° Emoji å­˜å–</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/31/bigfoot-dot-js-zhu-jiao-shi-xian/">bigfoot.js æ³¨è„šä¹‹ Octopress ç¯‡</a>
      </li>
    
  </ul>
</section>
<section>
<h1><i class="fa fa-comments"></i>&nbsp;Recent Comments</h1>
<ul class="ds-recent-comments" data-num-items="6" data-show-avatars="1" data-show-time="1" data-show-title="1" data-show-admin="1" data-excerpt-length="26"></ul>

<!--å¤šè¯´jsåŠ è½½å¼€å§‹ï¼Œä¸€ä¸ªé¡µé¢åªéœ€è¦åŠ è½½ä¸€æ¬¡ -->
<script type="text/javascript">
  var duoshuoQuery = {short_name:"hedleyyan"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!--å¤šè¯´jsåŠ è½½ç»“æŸï¼Œä¸€ä¸ªé¡µé¢åªéœ€è¦åŠ è½½ä¸€æ¬¡ -->

</section><section>
  <h1><i class="fa fa-globe"></i>&nbsp;Visitor Map</h1>
  <br>
  <script type="text/javascript" src="//rc.revolvermaps.com/0/0/0.js?i=2cpr3til0tz&amp;d=3&amp;p=1&amp;b=0&amp;w=268&amp;g=2&amp;f=arial&amp;fs=13&amp;r=0&amp;c0=362b05&amp;c1=375363&amp;c2=000000&amp;ic0=0&amp;ic1=0" async="async"></script>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

<p>
  Copyright &copy; 2018 - hedley -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
</footer>
  












  <script type="text/javascript" src="http://arrow.scrolltotop.com/arrow44.js"></script>
<noscript>Not seeing a <a href="http://www.scrolltotop.com/">Scroll to Top Button</a>? Go to our FAQ page for more info.</noscript>

</body>
</html>
